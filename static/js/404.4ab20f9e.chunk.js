(self.webpackChunkcontainer=self.webpackChunkcontainer||[]).push([[404],{1277:(e,t,n)=>{"use strict";n.d(t,{Qr:()=>c,SK:()=>l}),n(2396);var r=n(4743),o=n.n(r),i=(n(9678),function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})}),a=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},s=o().createInstance({name:"Uspacy",storeName:"tokens"}),c=function(e){return i(void 0,void 0,void 0,function(){return a(this,function(t){return console.log("SET finline:integration_token"),[2,s.setItem("finline:integration_token",e)]})})},l=function(){return i(void 0,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,s.getItem("finline:integration_token")];case 1:return e=t.sent(),console.log("GET finline:integration_token",e),[2,e]}})})}},1837:(e,t,n)=>{(()=>{"use strict";var t={7685:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteReason=t.updateReason=t.createReason=t.deleteStage=t.updateStage=t.createStage=t.deleteFunnel=t.updateFunnel=t.createFunnel=t.fetchStages=t.fetchFunnels=void 0;const i=n(5184),a=n(4809);t.fetchFunnels=(0,i.createAsyncThunk)("crm/funnels/fetchFunnels",(e,t)=>r(void 0,void 0,void 0,function*(){try{const t=yield a.uspacySdk.crmEntitiesService.getEntityFunnel(e);return null==t?void 0:t.data}catch(e){return t.rejectWithValue("Failure")}})),t.fetchStages=(0,i.createAsyncThunk)("crm/stage/fetchStages",({entityCode:e,funnelId:t},n)=>r(void 0,void 0,void 0,function*(){try{const n=yield a.uspacySdk.crmEntitiesService.getEntityStages(e,t);return null==n?void 0:n.data}catch(e){return n.rejectWithValue("Failure")}})),t.createFunnel=(0,i.createAsyncThunk)("crm/funnels/createFunnel",({data:e,entityCode:t},n)=>r(void 0,void 0,void 0,function*(){try{const n=yield a.uspacySdk.crmEntitiesService.createEntityFunnel(t,e);return null==n?void 0:n.data}catch(e){return n.rejectWithValue("Failure")}})),t.updateFunnel=(0,i.createAsyncThunk)("crm/funnels/updateFunnel",({data:e,entityCode:t},n)=>r(void 0,void 0,void 0,function*(){const{id:r}=e,i=o(e,["id"]);try{const e=yield a.uspacySdk.crmEntitiesService.updateEntityFunnel(t,r,i);return null==e?void 0:e.data}catch(e){return n.rejectWithValue("Failure")}})),t.deleteFunnel=(0,i.createAsyncThunk)("crm/funnels/deleteFunnel",({id:e,entityCode:t},n)=>r(void 0,void 0,void 0,function*(){try{return yield a.uspacySdk.crmEntitiesService.deleteEntityFunnel(t,e)}catch(e){return n.rejectWithValue(e)}})),t.createStage=(0,i.createAsyncThunk)("crm/funnels/createStage",({data:e,entityCode:t},n)=>r(void 0,void 0,void 0,function*(){try{const n=yield a.uspacySdk.crmEntitiesService.createEntityStage(t,e);return null==n?void 0:n.data}catch(e){return n.rejectWithValue("Failure")}})),t.updateStage=(0,i.createAsyncThunk)("crm/funnels/updateStage",({data:e,entityCode:t},n)=>r(void 0,void 0,void 0,function*(){try{const n=yield a.uspacySdk.crmEntitiesService.updateEntityStage(t,e.id,e);return null==n?void 0:n.data}catch(e){return n.rejectWithValue("Failure")}})),t.deleteStage=(0,i.createAsyncThunk)("crm/funnels/deleteStage",({id:e,entityCode:t},n)=>r(void 0,void 0,void 0,function*(){try{return yield a.uspacySdk.crmEntitiesService.deleteEntityStage(t,e)}catch(e){return n.rejectWithValue(e)}})),t.createReason=(0,i.createAsyncThunk)("crm/funnels/createReason",({data:e},t)=>r(void 0,void 0,void 0,function*(){try{return(yield a.uspacySdk.crmEntitiesService.createEntityReason(e.funnelId,e)).data}catch(e){return t.rejectWithValue("Failure")}})),t.updateReason=(0,i.createAsyncThunk)("crm/funnels/editReason",({data:e},t)=>r(void 0,void 0,void 0,function*(){try{const t=yield a.uspacySdk.crmEntitiesService.updateEntityReason(e.id,e);return null==t?void 0:t.data}catch(e){return t.rejectWithValue("Failure")}})),t.deleteReason=(0,i.createAsyncThunk)("crm/funnels/deleteReason",({id:e},t)=>r(void 0,void 0,void 0,function*(){try{return yield a.uspacySdk.crmEntitiesService.deleteEntityReason(e)}catch(e){return t.rejectWithValue(e)}}))},5184:e=>{e.exports=n(9613)},4809:e=>{e.exports=n(2396)}},r={},o=function e(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return t[n].call(i.exports,i,i.exports,e),i.exports}(7685);e.exports=o})()},2742:(e,t,n)=>{"use strict";n.d(t,{BS:()=>r,GU:()=>u,HM:()=>o,O_:()=>l,Uz:()=>d,pG:()=>i,qu:()=>s,tW:()=>c,x4:()=>a,zL:()=>p});var r=function(e){return e.payments.accounts},o=function(e){return e.payments.isAccountsLoading},i=function(e){return e.payments.isDeleting},a=function(e){return e.payments.isGenerating},s=function(e){return e.payments.isGenerated},c=function(e){return e.payments.isAccountsError},l=function(e){return e.payments.isDeleteError},u=function(e){return e.payments.isGenerateError},d=function(e){return e.payments.isUninitialized},p=function(e){return e.payments.paymentLink}},4395:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>xe});var r,o,i=n(4848),a=n(4408),s=n(4992),c=n(7869),l=n(1527),u=n(2339),d=n(4594),p=n(7862),f=n(4516),h=n(9422),v=n(6816),y=n(7877),m=n(1226),g=n(3263),b=n(7883),x=n(529),j=function(e){var t;return null===(t=e.settings.dealStatus)||void 0===t?void 0:t.status},S=function(e){return e.settings.settingsError},w=function(e){return e.settings.dealError},k=function(e){return e.settings.isLoading},O=function(e){return e.settings.isSavingDealStatus},C=function(e){return e.settings.isSavingSettings},A=function(e){return e.settings.isSettingsSaved},E=function(e){return e.settings.isDealStatusSaved},F=function(e){return e.settings.settingsRequestId},I=function(){var e=(0,b.GV)(j),t=(0,b.jL)(),n=(0,b.GV)(k),r=(0,b.GV)(O),o=(0,b.GV)(w),i=(0,b.GV)(E),a=(0,d.r)().token,s=!!o;(0,l.useEffect)(function(){e||n||!a||t((0,x.ZB)())},[n,e,a]);var c=(0,l.useCallback)(function(e){return n=void 0,r=void 0,i=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(n){return[2,t((0,x.oR)(e))]})},new((o=void 0)||(o=Promise))(function(e,t){function a(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o(function(e){e(n)})).then(a,s)}c((i=i.apply(n,r||[])).next())});var n,r,o,i},[]),u=(0,l.useCallback)(function(){t((0,x.ZB)())},[]);return{status:e,isError:s,isLoading:n||!a,error:o,refetch:u,saveDealStatus:c,isSaving:r,isSaved:i,isSaveError:s,saveError:o}},P=function(){var e=(0,l.useState)(!1),t=e[0],n=e[1],r=(0,b.jL)(),o=(0,b.GV)(C),i=(0,b.GV)(S),a=(0,b.GV)(A),s=(0,b.GV)(F),c=!!i,u=I(),d=(0,g.A)(),p=d.data,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(d,["data"]),h=(0,l.useCallback)(function(e,t){return o=void 0,i=void 0,s=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(o){switch(o.label){case 0:n(!0),o.label=1;case 1:return o.trys.push([1,,4,5]),[4,r((0,x.DZ)(e)).unwrap()];case 2:return o.sent(),[4,r((0,x.oR)(t)).unwrap()];case 3:return o.sent(),[3,5];case 4:return n(!1),[7];case 5:return[2]}})},new((a=void 0)||(a=Promise))(function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function r(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a(function(e){e(o)})).then(n,r)}c((s=s.apply(o,i||[])).next())});var o,i,a,s},[r]);return{accounts:p,dealPaymentStatus:u.status,save:h,isError:f.isError,isLoading:f.isLoading,error:f.error,isSaving:t||o,isSaved:a,isSaveFailed:c,saveError:i,refetch:f.refetch,requestId:s}};function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(null,arguments)}const L=e=>l.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),r||(r=l.createElement("circle",{cx:12,cy:12,r:10})),o||(o=l.createElement("path",{d:"M8 12h8M12 8v8"})));var V;function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(null,arguments)}const G=e=>l.createElement("svg",M({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),V||(V=l.createElement("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2M10 11v6M14 11v6"})));var B=n(9596),W=n(8217),z=n(416),D=n(2742),_=n(1629),R=n(7037),K=n(7071),N=n(799),H=n(7303),q=n(6831),U=n(8875),Z=function(){return Z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Z.apply(this,arguments)},Q=l.forwardRef(function(e,t){return(0,i.jsx)(U.A,Z({direction:"up",ref:t},e))}),J=function(e){var t=e.trigger,n=e.onProceed,r=l.useState(!1),o=r[0],s=r[1],c=(0,u.useTranslation)("translation").t,d=function(){s(!1)};return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsx)(a.Box,{sx:{display:"contents"},onClick:function(){s(!0)},children:t}),(0,i.jsxs)(R.A,{keepMounted:!0,open:o,TransitionComponent:Q,onClose:d,children:[(0,i.jsx)(q.A,{children:c("translation:common.alerts.conformDeleteItemTitle")}),(0,i.jsx)(N.A,{children:(0,i.jsx)(H.A,{children:c("translation:common.alerts.conformDeleteItemText")})}),(0,i.jsxs)(K.A,{children:[(0,i.jsx)(_.A,{onClick:d,children:c("translation:common.buttons.cancel")}),(0,i.jsx)(_.A,{color:"error",onClick:function(){d(),n()},children:c("translation:common.buttons.confirmDelete")})]})]})]})},X=function(e){var t=e.account,n=function(){var e=(0,l.useState)(!1),t=e[0],n=e[1],r=(0,b.jL)(),o=(0,b.GV)(D.pG),i=(0,b.GV)(D.O_),a=!!i,s=(0,l.useCallback)(function(e){return t=void 0,o=void 0,a=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,,2,3]),n(!0),[4,r((0,z.tN)(e))];case 1:return t.sent(),[3,3];case 2:return n(!1),[7];case 3:return[2]}})},new((i=void 0)||(i=Promise))(function(e,n){function r(e){try{c(a.next(e))}catch(e){n(e)}}function s(e){try{c(a.throw(e))}catch(e){n(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(r,s)}c((a=a.apply(t,o||[])).next())});var t,o,i,a},[]);return{deletePaymentAccount:s,isLoading:o,isError:a,error:i,isLocalLoading:t}}(),r=n.deletePaymentAccount,o=n.isLocalLoading,s=n.isError,c=n.error,u=(0,m.h)().errorNotification;return(0,l.useEffect)(function(){s&&u((0,v.u)(c).message)},[s]),(0,i.jsx)(a.ListItem,{secondaryAction:(0,i.jsx)(J,{onProceed:function(){r(t.id)},trigger:(0,i.jsx)(a.IconButton,{edge:"end",color:"error",size:"small",disabled:o,children:o?(0,i.jsx)(a.CircularProgress,{size:"1rem",color:"inherit"}):(0,i.jsx)(G,{})})}),sx:{position:"relative"},children:(0,i.jsx)(a.ListItemText,{primary:t.label})})},Y=function(){return Y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Y.apply(this,arguments)},$=function(e){var t=e.disabled,n=P(),r=n.accounts,o=n.isLoading,s=n.error,c=n.refetch,l=(0,u.useTranslation)("settings").t,d=(null==r?void 0:r.length)>0;return o&&!s?(0,i.jsx)(a.Stack,{sx:{minHeight:"200px",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(a.CircularProgress,{size:"1.5rem"})}):d||o||s?s?(0,i.jsxs)(a.Stack,{sx:{minHeight:"200px",gap:2,alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(a.Typography,{children:l("settings:settingsForm.errorPaymentAccounts")}),(0,i.jsx)(B.y,{type:"button",sx:{fontSize:"0.65rem"},loading:o,onClick:c,disabled:t,children:l("settings:settingsForm.actions.refetchPaymentAccounts")})]}):(0,i.jsx)(i.Fragment,{children:d&&(0,i.jsx)(a.List,{sx:Y({minHeight:"200px"},t&&{"& *":{pointerEvents:"none",opacity:"0.5",cursor:"default"}}),children:r.map(function(e){return(0,i.jsx)(X,{account:e},e.id)})})}):(0,i.jsx)(a.Stack,{sx:{minHeight:"200px",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(a.Typography,{children:l("settings:settingsForm.emptyPaymentAccounts")})})},ee=n(7216),te=function(){return te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},te.apply(this,arguments)},ne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function re(e){return"settings:settingsForm.".concat(e)}var oe={id:"",label:""},ie=function(e){var t=e.disabled,n=(0,ee.dk)(),r=n.funnels,o=n.isLoading,s=n.getStagesByFunnel,c=n.getFunnelById,d=(0,h.useFormContext)(),p=d.formState,f=d.setValue,v=(0,u.useTranslation)("settings").t;(0,l.useEffect)(function(){if(r.length){var e=r[0],t=s(e)[0];return f("funnel",e),void f("stage",t)}},[r]);var y=t||o;return(0,i.jsx)(h.Controller,{name:"funnel",render:function(e){var t,n,o,l=e.field,u=l.value,d=l.onChange,h=ne(l,["value","onChange"]),m=null!==(o=null===(n=null===(t=null==p?void 0:p.errors)||void 0===t?void 0:t[h.name])||void 0===n?void 0:n.message)&&void 0!==o?o:"";return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!m,disabled:y,children:[(0,i.jsx)(W.iy,{children:v(re("labels.funnel"))}),(0,i.jsxs)(W.ks,te({},h,{select:!0,id:"funnel",value:(null==u?void 0:u.id)||"",onChange:function(e){var t=e.target.value;if(""===t)return d(te({},oe)),void f("stage",te({},oe));var n=c(Number(t)),r=s(n)[0];d(n||te({},oe)),f("stage",r)},error:!!m,helperText:v(m),placeholder:v(re("placeholders.funnel")),disabled:y,SelectProps:{displayEmpty:!0},children:[(0,i.jsx)(a.MenuItem,{value:"",children:v(re("placeholders.funnel"))}),null==r?void 0:r.map(function(e){return(0,i.jsx)(a.MenuItem,{value:e.id,children:e.label},e.id)})]}))]})}})},ae=function(e){var t=e.disabled,n=(0,ee.dk)(),r=n.getStagesByFunnel,o=n.getStageById,s=n.getFunnelStagePairByStage,c=n.funnels,d=n.isLoading,p=(0,h.useFormContext)(),f=p.formState,v=p.setValue,y=p.watch,m=(0,u.useTranslation)("settings").t,g=I(),b=g.status,x=g.isLoading,j=y("funnel");(0,l.useEffect)(function(){if(b&&(null==c?void 0:c.length)){var e=s(b);v("stage",e.stage),v("funnel",e.funnel)}},[b,c,s]);var S=t||x||d;return(0,i.jsx)(h.Controller,{name:"stage",render:function(e){var t,n,s,c=e.field,l=c.value,u=c.onChange,d=ne(c,["value","onChange"]),p=null!==(s=null===(n=null===(t=null==f?void 0:f.errors)||void 0===t?void 0:t[d.name])||void 0===n?void 0:n.message)&&void 0!==s?s:"",h=r(j);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!p,disabled:S,children:[(0,i.jsx)(W.iy,{children:m(re("labels.stage"))}),(0,i.jsxs)(W.ks,te({},d,{select:!0,value:(null==l?void 0:l.id)||"",onChange:function(e){var t=e.target.value;if(""===t)return u(te({},oe)),void v("funnel",te({},oe));var n=o(Number(t),j);u(n||te({},oe))},id:"stage",error:!!p,helperText:m(p),placeholder:m(re("placeholders.stage")),disabled:S,SelectProps:{displayEmpty:!0},children:[(0,i.jsx)(a.MenuItem,{value:"",children:m(re("placeholders.stage"))}),null==h?void 0:h.map(function(e){return(0,i.jsx)(a.MenuItem,{value:e.id,children:e.label},e.id)})]}))]})}})},se=n(1366),ce=function(e){return"validation:common.".concat(e)},le=se.object({apiKey:se.pipe(se.string(),se.trim()),apiSecret:se.pipe(se.string(),se.trim()),posId:se.pipe(se.string(),se.trim()),endpointsKey:se.pipe(se.string(),se.trim()),label:se.pipe(se.string(),se.trim())}),ue=se.custom(function(e){if(!e)return!0;var t=Object.values(e).map(function(e){return(null!=e?e:"").toString().trim()}),n=t.every(function(e){return""===e}),r=t.every(function(e){return""!==e});return n||r},function(){return ce("optionalOrFilled")}),de=se.object({id:se.pipe(se.union([se.string(),se.number()])),label:se.string()}),pe=se.custom(function(e){return!!e&&Object.values(null!=e?e:{}).map(function(e){var t;return(null!==(t=String(e))&&void 0!==t?t:"").toString().trim()}).every(Boolean)},function(){return ce("required")}),fe=se.object({paymentAccounts:se.optional(se.array(se.pipe(le,ue))),funnel:se.pipe(de,pe),stage:se.pipe(de,pe)}),he=function(){return he=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},he.apply(this,arguments)},ve={posId:"",endpointsKey:"",label:"",apiKey:"",apiSecret:""},ye=function(e){var t=e.initial,n=e.onSubmit,r=e.disabled,o=e.loading,s=void 0!==o&&o,c=(0,u.useTranslation)(["settings","validation"]).t,l=(0,h.useForm)({defaultValues:t,resolver:(0,f.c)(fe)}),d=(0,h.useFieldArray)({control:l.control,name:"paymentAccounts"}),p=d.fields,v=d.append,m=d.remove,g=l.formState.isSubmitting||r;return(0,i.jsx)(h.FormProvider,he({},l,{children:(0,i.jsxs)(a.Box,{component:"form",sx:{pt:4,width:"100%"},onSubmit:l.handleSubmit(function(e){n(e)}),autoComplete:"off",children:[(0,i.jsxs)(a.Grid,{container:!0,spacing:3,children:[(0,i.jsx)(a.Grid,{item:!0,xs:12,children:(0,i.jsx)(W.LB,{title:(0,i.jsx)(a.Stack,{direction:"row",alignItems:"center",gap:1,children:c(x("fieldset.main"))}),titleSize:"0.75rem",sx:{pt:0,pb:2,px:"8px"},disabled:g,children:(0,i.jsx)($,{disabled:g})})}),(0,i.jsx)(a.Grid,{item:!0,xs:12,children:(0,i.jsx)(W.LB,{title:(0,i.jsx)(a.Stack,{direction:"row",alignItems:"center",gap:1,children:c(x("fieldset.afterPayment"))}),titleSize:"0.75rem",sx:{pt:2,pb:2,px:"8px"},disabled:g,children:(0,i.jsxs)(a.Stack,{gap:4,sx:{pt:3,pb:2},children:[(0,i.jsx)(ie,{disabled:g}),(0,i.jsx)(ae,{disabled:g})]})})}),(0,i.jsx)(a.Grid,{item:!0,xs:12,children:(0,i.jsxs)(W.LB,{title:(0,i.jsx)(a.Stack,{direction:"row",alignItems:"center",gap:1,children:c(x("fieldset.accounts"))}),titleSize:"0.75rem",sx:{pt:0,pb:2,px:"8px"},disabled:g,children:[(0,i.jsx)(a.Stack,{gap:2,sx:{pt:3,pb:2},children:p.map(function(e,t){var n,r,o,s,u=null!==(s=null===(o=null===(r=null===(n=l.formState.errors)||void 0===n?void 0:n.paymentAccounts)||void 0===r?void 0:r[t])||void 0===o?void 0:o.message)&&void 0!==s?s:"",d=!!u;return(0,i.jsxs)(a.Paper,{elevation:3,sx:{p:2,position:"relative"},children:[(0,i.jsx)(a.IconButton,{size:"small",color:"error",sx:{position:"absolute",right:4,top:4},onClick:function(){return function(e){0===e?(l.setValue("paymentAccounts.".concat(e),he({},ve)),l.clearErrors("paymentAccounts.".concat(e))):m(e)}(t)},disabled:g,children:(0,i.jsx)(G,{})}),(0,i.jsxs)(a.Stack,{gap:4,pt:4,children:[(0,i.jsx)(h.Controller,{name:"paymentAccounts.".concat(t,".label"),control:l.control,render:function(e){var n=e.field,r=b(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:g,children:[(0,i.jsx)(W.iy,{children:"".concat(t+1,". ").concat(c(x("labels.paymentAccountsName")))}),(0,i.jsx)(W.ks,he({},n,{onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:c(r),placeholder:c(x("placeholders.paymentAccountsName")),disabled:g}))]})}}),(0,i.jsx)(h.Controller,{name:"paymentAccounts.".concat(t,".apiKey"),control:l.control,render:function(e){var n=e.field,r=b(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:g,children:[(0,i.jsx)(W.iy,{children:c(x("labels.apiKey"))}),(0,i.jsx)(W.Fm,he({},n,{autoComplete:"off",onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:c(r),placeholder:c(x("placeholders.apiKey")),disabled:g}))]})}}),(0,i.jsx)(h.Controller,{name:"paymentAccounts.".concat(t,".apiSecret"),control:l.control,render:function(e){var n=e.field,r=b(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:g,children:[(0,i.jsx)(W.iy,{children:c(x("labels.apiSecret"))}),(0,i.jsx)(W.Fm,he({},n,{autoComplete:"off",onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:c(r),placeholder:c(x("placeholders.apiSecret")),disabled:g}))]})}}),(0,i.jsxs)(a.Stack,{flexDirection:"row",gap:4,children:[(0,i.jsx)(h.Controller,{name:"paymentAccounts.".concat(t,".posId"),control:l.control,render:function(e){var n=e.field,r=b(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:g,children:[(0,i.jsx)(W.iy,{children:c(x("labels.paymentAccountsId"))}),(0,i.jsx)(W.Fm,he({},n,{autoComplete:"off",onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:c(r),placeholder:c(x("placeholders.paymentAccountsId")),disabled:g}))]})}}),(0,i.jsx)(h.Controller,{name:"paymentAccounts.".concat(t,".endpointsKey"),control:l.control,render:function(e){var n=e.field,r=b(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:g,children:[(0,i.jsx)(W.iy,{children:c(x("labels.paymentAccountsEndppointsKey"))}),(0,i.jsx)(W.Fm,he({},n,{autoComplete:"off",onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:c(r),placeholder:c(x("placeholders.paymentAccountsEndppointsKey")),disabled:g}))]})}})]})]},e.id),d&&(0,i.jsx)(a.FormHelperText,{error:!0,sx:{pl:2,pt:1},children:c(u)})]},e.id)})}),(0,i.jsxs)(a.Stack,{flexDirection:"row",justifyContent:"flex-end",gap:1,pb:1,children:[(0,i.jsxs)(B.W,{onClick:function(){v(he({},ve))},sx:{gap:1},variant:"contained",disabled:g,children:[(0,i.jsx)(L,{}),(0,i.jsx)("span",{children:c(x("actions.addPaymentAccountField"))})]}),(0,i.jsxs)(a.Button,{onClick:function(){l.setValue("paymentAccounts",[he({},ve)]),l.clearErrors("paymentAccounts")},sx:{gap:1,backgroundColor:"error.light","&:hover":{backgroundColor:"error.main"}},variant:"contained",disabled:g||p.length<2,children:[(0,i.jsx)(G,{}),(0,i.jsx)("span",{children:c(x("actions.clearAllPaymentAccounts"))})]})]})]})})]}),(0,i.jsx)(a.Stack,{pt:4,flexDirection:"row",children:(0,i.jsx)(B.y,{fullWidth:!0,type:"submit",variant:"contained",loading:s,disabled:g||!l.formState.isDirty,children:c("settings:save")})})]})}));function b(e,t){var n,r,o,i,a,s,u=l.formState.errors;return(s=(0,y.Et)(t)?null!==(o=null===(r=null===(n=l.getFieldState(e))||void 0===n?void 0:n.error)||void 0===r?void 0:r.message)&&void 0!==o?o:"":null!==(a=null===(i=u[e])||void 0===i?void 0:i.message)&&void 0!==a?a:"")?c(s):""}function x(e){return"settings:settingsForm.".concat(e)}function j(e,t,n){var r=e.target.value;l.setValue(t,r,{shouldValidate:!0,shouldDirty:!0}),l.clearErrors("paymentAccounts.".concat(n))}};const me=function(){var e=(0,m.h)(),t=e.errorNotification,n=e.successNotification,r=P(),o=r.save,s=r.isSaveFailed,c=r.saveError,u=r.isSaved,d=r.isSaving,p=r.requestId,f=(0,g.A)().refetch,h=(0,l.useMemo)(function(){return{paymentAccounts:[{endpointsKey:"",posId:"",label:"",apiKey:"",apiSecret:""}],funnel:{label:"",id:""},stage:{label:"",id:""}}},[]),y=(0,l.useCallback)(function(e){return t=void 0,n=void 0,i=function(){var t,n;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(r){switch(r.label){case 0:return t=function(e){return{accounts:null==e?void 0:e.paymentAccounts.filter(function(e){return Object.values(null!=e?e:{}).every(Boolean)}).map(function(e){return{api_key:e.apiKey,api_secret:e.apiSecret,endpoint_id:e.endpointsKey,pos_id:e.posId,name:e.label}})}}(e),n=function(e){var t,n;return{status:String(null!==(n=null===(t=null==e?void 0:e.stage)||void 0===t?void 0:t.id)&&void 0!==n?n:"")}}(e),[4,o(t,n)];case 1:return r.sent(),[2]}})},new((r=void 0)||(r=Promise))(function(e,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(a,s)}c((i=i.apply(t,n||[])).next())});var t,n,r,i},[o]);return(0,l.useEffect)(function(){s&&t((0,v.u)(c).message)},[s,c]),(0,l.useEffect)(function(){u&&(f(),n())},[u]),(0,i.jsx)(l.Suspense,{fallback:(0,i.jsx)(a.Box,{children:(0,i.jsx)(a.CircularProgress,{})}),children:(0,i.jsx)(ye,{initial:h,onSubmit:y,disabled:d,loading:d},p)})};var ge=n(4955),be=function(){var e=(0,u.useTranslation)("settings").t;return(0,i.jsx)(a.Paper,{elevation:3,sx:{maxWidth:"600px",mx:"auto",p:4,borderRadius:3},children:(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(ge.g,{}),(0,i.jsx)(a.Typography,{component:"h1",fontSize:"1.5rem",fontWeight:600,pt:4,children:e("settings:title")}),(0,i.jsx)(me,{})]})})};const xe=function(e){var t=e.userSettings,n=e.integrationToken,r=(0,d.r)().setToken;return(0,l.useLayoutEffect)(function(){r(n)},[n]),(0,i.jsx)(c.StoreProvider,{children:(0,i.jsx)(p.A,{userSettings:t,children:(0,i.jsx)(be,{})})})}},4516:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(7384),o=n(9422),i=n(1366);function a(e,t,n){return void 0===n&&(n={}),function(a,s,c){try{var l=!c.shouldUseNativeValidation&&"all"===c.criteriaMode;return Promise.resolve((0,i.safeParseAsync)(e,a,Object.assign({},t,{abortPipeEarly:!l}))).then(function(e){if(e.issues){for(var t={};e.issues.length;){var s=e.issues[0],u=(0,i.getDotPath)(s);if(u&&(t[u]||(t[u]={message:s.message,type:s.type}),l)){var d=t[u].types,p=d&&d[s.type];t[u]=(0,o.appendErrors)(u,l,t,s.type,p?[].concat(p,s.message):s.message)}e.issues.shift()}return{values:{},errors:(0,r.toNestErrors)(t,c)}}return{values:n.raw?Object.assign({},a):e.output,errors:{}}})}catch(e){return Promise.reject(e)}}}},6399:(e,t,n)=>{(()=>{"use strict";var t={641:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useMemoizedAppSelector=t.useAppSelector=t.useAppDispatch=void 0;const o=r(n(113)),i=n(6689),a=n(6022);t.useAppDispatch=()=>(0,a.useDispatch)(),t.useAppSelector=a.useSelector,t.useMemoizedAppSelector=e=>{const n=(0,i.useRef)(null);return(0,t.useAppSelector)(t=>{const r=e(t);return(0,o.default)(n.current,r)?n.current:(n.current=r,r)})}},113:e=>{e.exports=n(2404)},6689:e=>{e.exports=n(1527)},6022:e=>{e.exports=n(3512)}},r={},o=function e(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return t[n].call(i.exports,i,i.exports,e),i.exports}(641);e.exports=o})()},7877:(e,t,n)=>{"use strict";n.d(t,{Et:()=>o,Gv:()=>i,Kg:()=>r});var r=function(e){return"string"==typeof e},o=function(e){return"number"==typeof e},i=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}},8217:(e,t,n)=>{"use strict";n.d(t,{Fm:()=>h,G3:()=>p,LB:()=>f,iy:()=>d,ks:()=>u});var r=n(4848),o=n(4408),i=n(1527),a=n(3457),s=n(6105),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=(0,o.styled)(o.TextField)(function(e){var t=e.theme;return{backgroundColor:t.palette.background.paper,"& .MuiOutlinedInput-root":{"& fieldset":{border:"1px solid #dfe1e6",boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&:hover fieldset":{border:"1px solid #dfe1e6",boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&.Mui-disabled fieldset":{border:"1px solid #dfe1e6",boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&.Mui-focused fieldset":{border:"2px solid ".concat(t.palette.background.brand),boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&.Mui-focused.Mui-error fieldset":{border:"2px solid ".concat(t.palette.error.main),boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&.Mui-error fieldset":{border:"1px solid ".concat(t.palette.error.main)},"&.Mui-error .MuiInputBase-input":{"&::placeholder":{color:t.palette.error.main}}},"& .MuiInputBase-input":c(c({},t.typography.body1),{color:t.palette.text.primary,"&::placeholder":{color:t.palette.text.secondary}})}}),d=(0,o.styled)(o.InputLabel)(function(){return{textAlign:"left",fontFamily:"Inter",fontStyle:"normal",fontWeight:500,fontSize:12,lineHeight:"24px",color:"#7A869A","& .MuiFormLabel-asterisk":{color:"#aa2b2b"},left:-14,top:-42}}),p=o.Autocomplete,f=function(e){var t=e.title,n=e.color,i=void 0===n?"#ffffff":n,a=e.titleSize,s=void 0===a?"0.75rem":a,u=e.children,d=e.sx,p=void 0===d?{}:d,f=e.disabled,h=l(e,["title","color","titleSize","children","sx","disabled"]);return(0,r.jsxs)(o.Box,c({component:"fieldset",sx:c({position:"relative",border:"none",m:0,"&:after":{content:'""',position:"absolute",width:"calc(100% - 16px)",height:"1px",backgroundColor:"grey.400",top:"-17px"}},p)},h,{children:[t&&(0,r.jsx)(o.Typography,{component:"legend",sx:c({color:i,fontSize:s,position:"relative",backgroundColor:"background.brand",padding:"8px 12px",borderRadius:"4px",zIndex:2,"&:after":{content:'""',position:"absolute",width:"8px",height:"100%",top:0,right:"-8px",backgroundColor:"#ffffff",zIndex:1},"& *":{position:"relative",zIndex:3,opacity:f?"0.5":"1"}},f&&{"&:before":{content:'""',position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"#ffffff",borderRadius:"inherit",zIndex:2,opacity:f?"0.5":"1"}}),children:t}),u]}))},h=(0,i.forwardRef)(function(e,t){var n=e.disabled,d=l(e,["disabled"]),p=(0,i.useState)(!1),f=p[0],h=p[1];return(0,r.jsx)(u,c({ref:t,type:f?"text":"password",InputProps:{endAdornment:(0,r.jsx)(o.InputAdornment,{position:"start",children:(0,r.jsx)(o.IconButton,{"aria-label":"toggle password visibility",onClick:function(){return h(function(e){return!e})},onMouseDown:function(e){e.preventDefault()},edge:"end",disabled:n,children:f?(0,r.jsx)(s.A,{}):(0,r.jsx)(a.A,{})})})},disabled:n},d))});h.displayName="PasswordTextInput"}}]);
//# sourceMappingURL=404.4ab20f9e.chunk.js.map