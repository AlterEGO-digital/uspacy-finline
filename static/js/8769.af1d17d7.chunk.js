"use strict";(self.webpackChunkcontainer=self.webpackChunkcontainer||[]).push([[8769],{364:(e,t,n)=>{n.d(t,{AN:()=>l,Bn:()=>s,CU:()=>c,aK:()=>a});var r=n(2923),o=n(9678),i=n(9883),a=(0,r.xP)({reducerPath:"settingsApi",baseQuery:(0,i.S)(),endpoints:function(e){return{saveSettings:e.mutation({query:function(e){return{url:o.xE.saveSettings(),method:"POST",data:e.accounts}},transformErrorResponse:function(e){return 401===e.status||403===e.status?null:{message:e.data}}}),getDealStatus:e.query({query:function(){return{url:o.xE.dealStatus(),method:"GET"}},transformErrorResponse:function(e){return 401===e.status||403===e.status?null:{message:e.data}}}),saveDeal:e.mutation({query:function(e){return{url:o.xE.saveDealStatus(),method:"POST",data:e}},transformErrorResponse:function(e){return 401===e.status||403===e.status?null:{message:e.data}}})}}}),s=a.useSaveSettingsMutation,l=a.useGetDealStatusQuery,c=a.useSaveDealMutation},1277:(e,t,n)=>{n.d(t,{gf:()=>l});var r=n(2396),o=n(4743),i=n.n(o),a=n(9678),s=i().createInstance({name:"Uspacy",storeName:"tokens"}),l=function(){return e=void 0,t=void 0,o=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(e){switch(e.label){case 0:return a.Cu?[2,s.getItem("token")]:[4,r.uspacySdk.tokensService.getToken()];case 1:return[2,e.sent()]}}))},new((n=void 0)||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o}},3907:(e,t,n)=>{n.d(t,{AX:()=>y,Aq:()=>f,Cs:()=>p,Db:()=>h,Zf:()=>u,bb:()=>d});var r=n(2923),o=n(9678),i=n(9883),a=n(4262),s=n(8247),l=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},c="PAYMENTS",u=(0,r.xP)({reducerPath:"paymentApi",tagTypes:[c],baseQuery:(0,i.S)(),endpoints:function(e){return{generatePaymentLink:e.mutation({query:function(e){return{url:o.xE.generatePaymentLink(),method:"POST",data:e}},transformErrorResponse:function(e){return 401===e.status||403===e.status?null:{message:e.data}}}),deletePaymentAccount:e.mutation({query:function(e){return{url:o.xE.deletePaymentAccount(e),method:"DELETE"}},transformErrorResponse:function(e){return 401===e.status||403===e.status?null:{message:e.data}},transformResponse:function(){return{success:!0}},invalidatesTags:function(e){return(null==e?void 0:e.success)?[c]:[]}}),getPaymentAccountsList:e.query({query:function(){return{url:o.xE.paymentAccounts(),method:"GET"}},transformResponse:function(e){return e.map(s.P)},transformErrorResponse:function(e){return 401===e.status||403===e.status?null:{message:e.data}},providesTags:[c]}),getCurrencyList:e.query({queryFn:function(){var e=["UAH","USD","EUR"],t=a.l.XTS;return o.Cu||o.zD?{data:l([t],e,!0)}:{data:e}}}),getRecieptDeliveryList:e.query({queryFn:function(){return{data:["None","Email","SMS","Viber"]}}})}}}),d=u.useDeletePaymentAccountMutation,p=u.useGeneratePaymentLinkMutation,f=u.useGetPaymentAccountsListQuery,h=u.useGetCurrencyListQuery,y=u.useGetRecieptDeliveryListQuery},7877:(e,t,n)=>{n.d(t,{E:()=>o,K:()=>r});var r=function(e){return"string"==typeof e},o=function(e){return"number"==typeof e}},8217:(e,t,n)=>{n.d(t,{Fm:()=>h,G3:()=>p,LB:()=>f,iy:()=>d,ks:()=>u});var r=n(4848),o=n(4408),i=n(1527),a=n(3457),s=n(6105),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},u=(0,o.styled)(o.TextField)((function(e){var t=e.theme;return{backgroundColor:t.palette.background.paper,"& .MuiOutlinedInput-root":{"& fieldset":{border:"1px solid #dfe1e6",boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&:hover fieldset":{border:"1px solid #dfe1e6",boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&.Mui-disabled fieldset":{border:"1px solid #dfe1e6",boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&.Mui-focused fieldset":{border:"2px solid ".concat(t.palette.background.brand),boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&.Mui-focused.Mui-error fieldset":{border:"2px solid ".concat(t.palette.error.main),boxShadow:"0 1px 1px rgba(0,0,0,.08)"},"&.Mui-error fieldset":{border:"1px solid ".concat(t.palette.error.main)},"&.Mui-error .MuiInputBase-input":{"&::placeholder":{color:t.palette.error.main}}},"& .MuiInputBase-input":l(l({},t.typography.body1),{color:t.palette.text.primary,"&::placeholder":{color:t.palette.text.secondary}})}})),d=(0,o.styled)(o.InputLabel)((function(){return{textAlign:"left",fontFamily:"Inter",fontStyle:"normal",fontWeight:500,fontSize:12,lineHeight:"24px",color:"#7A869A","& .MuiFormLabel-asterisk":{color:"#aa2b2b"},left:-14,top:-42}})),p=o.Autocomplete,f=function(e){var t=e.title,n=e.color,i=void 0===n?"#ffffff":n,a=e.titleSize,s=void 0===a?"0.75rem":a,u=e.children,d=e.sx,p=void 0===d?{}:d,f=e.disabled,h=c(e,["title","color","titleSize","children","sx","disabled"]);return(0,r.jsxs)(o.Box,l({component:"fieldset",sx:l({position:"relative",border:"none",m:0,"&:after":{content:'""',position:"absolute",width:"calc(100% - 16px)",height:"1px",backgroundColor:"grey.400",top:"-17px"}},p)},h,{children:[t&&(0,r.jsx)(o.Typography,{component:"legend",sx:l({color:i,fontSize:s,position:"relative",backgroundColor:"background.brand",padding:"8px 12px",borderRadius:"4px",zIndex:2,"&:after":{content:'""',position:"absolute",width:"8px",height:"100%",top:0,right:"-8px",backgroundColor:"#ffffff",zIndex:1},"& *":{position:"relative",zIndex:3,opacity:f?"0.5":"1"}},f&&{"&:before":{content:'""',position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"#ffffff",borderRadius:"inherit",zIndex:2,opacity:f?"0.5":"1"}}),children:t}),u]}))},h=(0,i.forwardRef)((function(e,t){var n=e.disabled,d=c(e,["disabled"]),p=(0,i.useState)(!1),f=p[0],h=p[1];return(0,r.jsx)(u,l({ref:t,type:f?"text":"password",InputProps:{endAdornment:(0,r.jsx)(o.InputAdornment,{position:"start",children:(0,r.jsx)(o.IconButton,{"aria-label":"toggle password visibility",onClick:function(){return h((function(e){return!e}))},onMouseDown:function(e){e.preventDefault()},edge:"end",disabled:n,children:f?(0,r.jsx)(s.A,{}):(0,r.jsx)(a.A,{})})})},disabled:n},d))}));h.displayName="PasswordTextInput"},9661:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se});var r,o,i=n(4848),a=n(4408),s=n(4992),l=n(7869),c=n(2339),u=n(5980),d=n(4516),p=n(1527),f=n(9422),h=n(6816),y=n(7877),v=n(1226),m=n(3907),b=n(364),g=function(){var e,t=(0,b.AN)(),n=t.data,r=t.isError,o=t.isFetching,i=t.isLoading,a=t.isSuccess,s=t.error,l=t.refetch,c=(0,b.CU)(),u=c[0],d=c[1],f=(0,p.useCallback)((function(e){return t=void 0,n=void 0,o=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(t){switch(t.label){case 0:return[4,u(e)];case 1:return[2,t.sent()]}}))},new((r=void 0)||(r=Promise))((function(e,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}l((o=o.apply(t,n||[])).next())}));var t,n,r,o}),[u]);return{status:String(null!==(e=null==n?void 0:n.status)&&void 0!==e?e:""),isError:r,isFetching:o,isLoading:i,isSuccess:a,error:s,refetch:l,saveDealStatus:f,isSaving:d.isLoading,isSaveError:d.isError,isSaved:d.isSuccess,saveError:d.error}},x=function(){var e=(0,p.useState)(!1),t=e[0],n=e[1],r=(0,m.Aq)(),o=g(),i=(0,b.Bn)(),a=i[0],s=i[1],l=g(),c=l.saveDealStatus,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(l,["saveDealStatus"]),d=r.isLoading||o.isLoading,f=r.isError,h=r.error;return{accounts:null==r?void 0:r.data,dealPaymentStatus:o.status,save:function(e,t){return o=void 0,i=void 0,l=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,,3,4]),n(!0),[4,a(e)];case 1:return o.sent(),r.refetch(),[4,c(t)];case 2:return o.sent(),[3,4];case 3:return n(!1),[7];case 4:return[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{a(l.next(e))}catch(e){t(e)}}function r(e){try{a(l.throw(e))}catch(e){t(e)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(n,r)}a((l=l.apply(o,i||[])).next())}));var o,i,s,l},isError:f,isLoading:d,error:h,isSaving:t,isSaved:s.isSuccess&&u.isSaved,isSaveFailed:s.isError||u.isSaveError,saveError:s.error||u.saveError,refetch:r.refetch,requestId:s.requestId}};function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(null,arguments)}const S=e=>p.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),r||(r=p.createElement("circle",{cx:12,cy:12,r:10})),o||(o=p.createElement("path",{d:"M8 12h8M12 8v8"})));var w;function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(null,arguments)}const C=e=>p.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),w||(w=p.createElement("path",{d:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2M10 11v6M14 11v6"})));var A=n(9596),O=n(8217),E=n(1629),P=n(7037),I=n(7071),F=n(799),T=n(7303),L=n(6831),M=n(8875),D=function(){return D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},D.apply(this,arguments)},B=p.forwardRef((function(e,t){return(0,i.jsx)(M.A,D({direction:"up",ref:t},e))})),z=function(e){var t=e.trigger,n=e.onProceed,r=p.useState(!1),o=r[0],s=r[1],l=(0,c.useTranslation)("translation").t,u=function(){s(!1)};return(0,i.jsxs)(p.Fragment,{children:[(0,i.jsx)(a.Box,{sx:{display:"contents"},onClick:function(){s(!0)},children:t}),(0,i.jsxs)(P.A,{keepMounted:!0,open:o,TransitionComponent:B,onClose:u,children:[(0,i.jsx)(L.A,{children:l("translation:common.alerts.conformDeleteItemTitle")}),(0,i.jsx)(F.A,{children:(0,i.jsx)(T.A,{children:l("translation:common.alerts.conformDeleteItemText")})}),(0,i.jsxs)(I.A,{children:[(0,i.jsx)(E.A,{onClick:u,children:l("translation:common.buttons.cancel")}),(0,i.jsx)(E.A,{color:"error",onClick:function(){u(),n()},children:l("translation:common.buttons.confirmDelete")})]})]})]})},q=function(e){var t=e.account,n=function(){var e=(0,m.bb)(),t=e[0],n=e[1],r=(0,p.useCallback)((function(e){return n=void 0,r=void 0,i=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(n){switch(n.label){case 0:return[4,t(e)];case 1:return n.sent(),[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{l(i.next(e))}catch(e){t(e)}}function s(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}l((i=i.apply(n,r||[])).next())}));var n,r,o,i}),[t]);return{deletePaymentAccount:r,isLoading:n.isLoading,isError:n.isError,isSuccess:n.isSuccess,error:n.error}}(),r=n.deletePaymentAccount,o=n.isLoading,s=n.isError,l=n.error,c=(0,v.h)().errorNotification;return(0,p.useEffect)((function(){s&&c((0,h.u)(l))}),[s]),(0,i.jsx)(a.ListItem,{secondaryAction:(0,i.jsx)(z,{onProceed:function(){r(t.id)},trigger:(0,i.jsx)(a.IconButton,{edge:"end",color:"error",size:"small",disabled:o,children:o?(0,i.jsx)(a.CircularProgress,{size:"1rem",color:"inherit"}):(0,i.jsx)(C,{})})}),sx:{position:"relative"},children:(0,i.jsx)(a.ListItemText,{primary:t.label})})},G=function(){return G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},G.apply(this,arguments)},R=function(e){var t=e.disabled,n=x(),r=n.accounts,o=n.isLoading,s=n.error,l=n.refetch,u=(0,c.useTranslation)("settings").t,d=(null==r?void 0:r.length)>0;return o&&!s?(0,i.jsx)(a.Stack,{sx:{minHeight:"200px",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(a.CircularProgress,{size:"1.5rem"})}):d||o||s?s?(0,i.jsxs)(a.Stack,{sx:{minHeight:"200px",gap:2,alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(a.Typography,{children:u("settings:settingsForm.errorPaymentAccounts")}),(0,i.jsx)(A.y,{type:"button",sx:{fontSize:"0.65rem"},loading:o,onClick:l,disabled:t,children:u("settings:settingsForm.actions.refetchPaymentAccounts")})]}):(0,i.jsx)(i.Fragment,{children:d&&(0,i.jsx)(a.List,{sx:G({minHeight:"200px"},t&&{"& *":{pointerEvents:"none",opacity:"0.5",cursor:"default"}}),children:r.map((function(e){return(0,i.jsx)(q,{account:e},e.id)}))})}):(0,i.jsx)(a.Stack,{sx:{minHeight:"200px",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(a.Typography,{children:u("settings:settingsForm.emptyPaymentAccounts")})})},K=n(7216),W=function(){return W=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},W.apply(this,arguments)},N=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function V(e){return"settings:settingsForm.".concat(e)}var H={id:"",label:""},Q=function(e){var t=e.disabled,n=(0,K.dk)(),r=n.funnels,o=n.isLoading,s=n.getStagesByFunnel,l=n.getFunnelById,u=(0,f.useFormContext)(),d=u.formState,h=u.setValue,y=(0,c.useTranslation)("settings").t;(0,p.useEffect)((function(){if(r.length){var e=r[0],t=s(e)[0];h("funnel",e),h("stage",t)}}),[r]);var v=t||o;return(0,i.jsx)(f.Controller,{name:"funnel",render:function(e){var t,n,o,c=e.field,u=c.value,p=c.onChange,f=N(c,["value","onChange"]),m=null!==(o=null===(n=null===(t=null==d?void 0:d.errors)||void 0===t?void 0:t[f.name])||void 0===n?void 0:n.message)&&void 0!==o?o:"";return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!m,disabled:v,children:[(0,i.jsx)(O.iy,{children:y(V("labels.funnel"))}),(0,i.jsxs)(O.ks,W({},f,{select:!0,id:"funnel",value:(null==u?void 0:u.id)||"",onChange:function(e){var t=e.target.value;if(""===t)return p(W({},H)),void h("stage",W({},H));var n=l(Number(t)),r=s(n)[0];p(n||W({},H)),h("stage",r)},error:!!m,helperText:y(m),placeholder:y(V("placeholders.funnel")),disabled:v,SelectProps:{displayEmpty:!0},children:[(0,i.jsx)(a.MenuItem,{value:"",children:y(V("placeholders.funnel"))}),null==r?void 0:r.map((function(e){return(0,i.jsx)(a.MenuItem,{value:e.id,children:e.label},e.id)}))]}))]})}})},U=function(e){var t=e.disabled,n=(0,K.dk)(),r=n.getStagesByFunnel,o=n.getStageById,s=n.getFunnelStagePairByStage,l=n.funnels,u=n.isLoading,d=(0,f.useFormContext)(),h=d.formState,y=d.setValue,v=d.watch,m=(0,c.useTranslation)("settings").t,b=x(),g=b.dealPaymentStatus,j=b.isLoading,S=(0,p.useRef)(!1),w=v("funnel");(0,p.useEffect)((function(){if(g&&(null==l?void 0:l.length)&&!S.current){S.current=!0;var e=s(g);y("stage",e.stage),y("funnel",e.funnel)}}),[g,l,s]);var k=t||j||u;return(0,i.jsx)(f.Controller,{name:"stage",render:function(e){var t,n,s,l=e.field,c=l.value,u=l.onChange,d=N(l,["value","onChange"]),p=null!==(s=null===(n=null===(t=null==h?void 0:h.errors)||void 0===t?void 0:t[d.name])||void 0===n?void 0:n.message)&&void 0!==s?s:"",f=r(w);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!p,disabled:k,children:[(0,i.jsx)(O.iy,{children:m(V("labels.stage"))}),(0,i.jsxs)(O.ks,W({},d,{select:!0,value:(null==c?void 0:c.id)||"",onChange:function(e){var t=e.target.value;if(""===t)return u(W({},H)),void y("funnel",W({},H));var n=o(Number(t),w);u(n||W({},H))},id:"stage",error:!!p,helperText:m(p),placeholder:m(V("placeholders.stage")),disabled:k,SelectProps:{displayEmpty:!0},children:[(0,i.jsx)(a.MenuItem,{value:"",children:m(V("placeholders.stage"))}),null==f?void 0:f.map((function(e){return(0,i.jsx)(a.MenuItem,{value:e.id,children:e.label},e.id)}))]}))]})}})},_=n(1366),X=function(e){return"validation:common.".concat(e)},Y=_.object({apiKey:_.pipe(_.string(),_.trim()),apiSecret:_.pipe(_.string(),_.trim()),posId:_.pipe(_.string(),_.trim()),endpointsKey:_.pipe(_.string(),_.trim()),label:_.pipe(_.string(),_.trim())}),Z=_.custom((function(e){if(!e)return!0;var t=Object.values(e).map((function(e){return(null!=e?e:"").toString().trim()})),n=t.every((function(e){return""===e})),r=t.every((function(e){return""!==e}));return n||r}),(function(){return X("optionalOrFilled")})),$=_.object({id:_.pipe(_.union([_.string(),_.number()])),label:_.string()}),J=_.custom((function(e){return!!e&&Object.values(null!=e?e:{}).map((function(e){var t;return(null!==(t=String(e))&&void 0!==t?t:"").toString().trim()})).every(Boolean)}),(function(){return X("required")})),ee=_.object({paymentAccounts:_.optional(_.array(_.pipe(Y,Z))),funnel:_.pipe($,J),stage:_.pipe($,J)}),te=function(){return te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},te.apply(this,arguments)},ne={posId:"",endpointsKey:"",label:"",apiKey:"",apiSecret:""},re=function(e){var t=e.initial,n=e.onSubmit,r=e.disabled,o=e.loading,s=void 0!==o&&o,l=(0,c.useTranslation)(["settings","validation"]).t,u=(0,f.useForm)({defaultValues:t,resolver:(0,d.c)(ee)}),p=(0,f.useFieldArray)({control:u.control,name:"paymentAccounts"}),h=p.fields,v=p.append,m=p.remove,b=u.formState.isSubmitting||r;return(0,i.jsx)(f.FormProvider,te({},u,{children:(0,i.jsxs)(a.Box,{component:"form",sx:{pt:4,width:"100%"},onSubmit:u.handleSubmit((function(e){n(e)})),children:[(0,i.jsxs)(a.Grid,{container:!0,spacing:3,children:[(0,i.jsx)(a.Grid,{item:!0,xs:12,children:(0,i.jsx)(O.LB,{title:(0,i.jsx)(a.Stack,{direction:"row",alignItems:"center",gap:1,children:l(x("fieldset.main"))}),titleSize:"0.75rem",sx:{pt:0,pb:2,px:"8px"},disabled:b,children:(0,i.jsx)(R,{disabled:b})})}),(0,i.jsx)(a.Grid,{item:!0,xs:12,children:(0,i.jsx)(O.LB,{title:(0,i.jsx)(a.Stack,{direction:"row",alignItems:"center",gap:1,children:l(x("fieldset.afterPayment"))}),titleSize:"0.75rem",sx:{pt:2,pb:2,px:"8px"},disabled:b,children:(0,i.jsxs)(a.Stack,{gap:4,sx:{pt:3,pb:2},children:[(0,i.jsx)(Q,{disabled:b}),(0,i.jsx)(U,{disabled:b})]})})}),(0,i.jsx)(a.Grid,{item:!0,xs:12,children:(0,i.jsxs)(O.LB,{title:(0,i.jsx)(a.Stack,{direction:"row",alignItems:"center",gap:1,children:l(x("fieldset.accounts"))}),titleSize:"0.75rem",sx:{pt:0,pb:2,px:"8px"},disabled:b,children:[(0,i.jsx)(a.Stack,{gap:2,sx:{pt:3,pb:2},children:h.map((function(e,t){var n,r,o,s,c=null!==(s=null===(o=null===(r=null===(n=u.formState.errors)||void 0===n?void 0:n.paymentAccounts)||void 0===r?void 0:r[t])||void 0===o?void 0:o.message)&&void 0!==s?s:"",d=!!c;return(0,i.jsxs)(a.Paper,{elevation:3,sx:{p:2,position:"relative"},children:[(0,i.jsx)(a.IconButton,{size:"small",color:"error",sx:{position:"absolute",right:4,top:4},onClick:function(){return function(e){0===e?(u.setValue("paymentAccounts.".concat(e),te({},ne)),u.clearErrors("paymentAccounts.".concat(e))):m(e)}(t)},disabled:b,children:(0,i.jsx)(C,{})}),(0,i.jsxs)(a.Stack,{gap:4,pt:4,children:[(0,i.jsx)(f.Controller,{name:"paymentAccounts.".concat(t,".label"),control:u.control,render:function(e){var n=e.field,r=g(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:b,children:[(0,i.jsx)(O.iy,{children:"".concat(t+1,". ").concat(l(x("labels.paymentAccountsName")))}),(0,i.jsx)(O.ks,te({},n,{onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:l(r),placeholder:l(x("placeholders.paymentAccountsName")),disabled:b}))]})}}),(0,i.jsx)(f.Controller,{name:"paymentAccounts.".concat(t,".apiKey"),control:u.control,render:function(e){var n=e.field,r=g(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:b,children:[(0,i.jsx)(O.iy,{children:l(x("labels.apiKey"))}),(0,i.jsx)(O.Fm,te({},n,{onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:l(r),placeholder:l(x("placeholders.apiKey")),disabled:b}))]})}}),(0,i.jsx)(f.Controller,{name:"paymentAccounts.".concat(t,".apiSecret"),control:u.control,render:function(e){var n=e.field,r=g(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:b,children:[(0,i.jsx)(O.iy,{children:l(x("labels.apiSecret"))}),(0,i.jsx)(O.Fm,te({},n,{onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:l(r),placeholder:l(x("placeholders.apiSecret")),disabled:b}))]})}}),(0,i.jsxs)(a.Stack,{flexDirection:"row",gap:4,children:[(0,i.jsx)(f.Controller,{name:"paymentAccounts.".concat(t,".posId"),control:u.control,render:function(e){var n=e.field,r=g(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:b,children:[(0,i.jsx)(O.iy,{children:l(x("labels.paymentAccountsId"))}),(0,i.jsx)(O.Fm,te({},n,{onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:l(r),placeholder:l(x("placeholders.paymentAccountsId")),disabled:b}))]})}}),(0,i.jsx)(f.Controller,{name:"paymentAccounts.".concat(t,".endpointsKey"),control:u.control,render:function(e){var n=e.field,r=g(n.name,t);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r||d,disabled:b,children:[(0,i.jsx)(O.iy,{children:l(x("labels.paymentAccountsEndppointsKey"))}),(0,i.jsx)(O.Fm,te({},n,{onChange:function(e){d?j(e,n.name,t):n.onChange(e)},error:!!r||d,helperText:l(r),placeholder:l(x("placeholders.paymentAccountsEndppointsKey")),disabled:b}))]})}})]})]},e.id),d&&(0,i.jsx)(a.FormHelperText,{error:!0,sx:{pl:2,pt:1},children:l(c)})]},e.id)}))}),(0,i.jsxs)(a.Stack,{flexDirection:"row",justifyContent:"flex-end",gap:1,pb:1,children:[(0,i.jsxs)(A.W,{onClick:function(){v(te({},ne))},sx:{gap:1},variant:"contained",disabled:b,children:[(0,i.jsx)(S,{}),(0,i.jsx)("span",{children:l(x("actions.addPaymentAccountField"))})]}),(0,i.jsxs)(a.Button,{onClick:function(){u.setValue("paymentAccounts",[te({},ne)]),u.clearErrors("paymentAccounts")},sx:{gap:1,backgroundColor:"error.light","&:hover":{backgroundColor:"error.main"}},variant:"contained",disabled:b||h.length<2,children:[(0,i.jsx)(C,{}),(0,i.jsx)("span",{children:l(x("actions.clearAllPaymentAccounts"))})]})]})]})})]}),(0,i.jsx)(a.Stack,{pt:4,flexDirection:"row",children:(0,i.jsx)(A.y,{fullWidth:!0,type:"submit",variant:"contained",loading:s,disabled:b||!u.formState.isDirty,children:l("settings:save")})})]})}));function g(e,t){var n,r,o,i,a,s,c=u.formState.errors;return(s=(0,y.E)(t)?null!==(o=null===(r=null===(n=u.getFieldState(e))||void 0===n?void 0:n.error)||void 0===r?void 0:r.message)&&void 0!==o?o:"":null!==(a=null===(i=c[e])||void 0===i?void 0:i.message)&&void 0!==a?a:"")?l(s):""}function x(e){return"settings:settingsForm.".concat(e)}function j(e,t,n){var r=e.target.value;u.setValue(t,r,{shouldValidate:!0,shouldDirty:!0}),u.clearErrors("paymentAccounts.".concat(n))}};const oe=function(){var e=(0,v.h)(),t=e.errorNotification,n=e.successNotification,r=x(),o=r.save,s=r.isSaveFailed,l=r.saveError,c=r.isSaved,u=r.isSaving,d=r.requestId,f=(0,p.useMemo)((function(){return{paymentAccounts:[{endpointsKey:"",posId:"",label:"",apiKey:"",apiSecret:""}],funnel:{label:"",id:""},stage:{label:"",id:""}}}),[]),y=c?"":d,m=(0,p.useCallback)((function(e){return t=void 0,n=void 0,i=function(){var t,n;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(r){switch(r.label){case 0:return t=function(e){return{accounts:null==e?void 0:e.paymentAccounts.filter((function(e){return Object.values(null!=e?e:{}).every(Boolean)})).map((function(e){return{api_key:e.apiKey,api_secret:e.apiSecret,endpoint_id:e.endpointsKey,pos_id:e.posId,name:e.label}}))}}(e),n=function(e){var t,n;return{status:String(null!==(n=null===(t=null==e?void 0:e.stage)||void 0===t?void 0:t.id)&&void 0!==n?n:"")}}(e),[4,o(t,n)];case 1:return r.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,s)}l((i=i.apply(t,n||[])).next())}));var t,n,r,i}),[o]);return(0,p.useEffect)((function(){s&&t((0,h.u)(l))}),[s,l]),(0,p.useEffect)((function(){c&&n()}),[c]),(0,i.jsx)(p.Suspense,{fallback:(0,i.jsx)(a.Box,{children:(0,i.jsx)(a.CircularProgress,{})}),children:(0,i.jsx)(re,{initial:f,onSubmit:m,disabled:u,loading:u},y)})};var ie=n(4955),ae=function(){var e=(0,c.useTranslation)("settings").t;return(0,i.jsx)(a.Paper,{elevation:3,sx:{maxWidth:"600px",mx:"auto",p:4,borderRadius:3},children:(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(ie.g,{}),(0,i.jsx)(a.Typography,{component:"h1",fontSize:"1.5rem",fontWeight:600,pt:4,children:e("settings:title")}),(0,i.jsx)(oe,{})]})})};const se=function(e){var t=e.userSettings;return(0,i.jsx)(l.StoreProvider,{children:(0,i.jsx)(u.A,{userSettings:t,children:(0,i.jsx)(ae,{})})})}},9678:(e,t,n)=>{n.d(t,{Cu:()=>i,H$:()=>o,xE:()=>s,zD:()=>r});var r=["https://stage3.staging.uspacy.tech","http://localhost:8080"].includes(window.location.origin),o=r?"http://test-finline.alterego.biz.ua":"https://finline.alterego.digital/finline",i=!1,a="Laravel/v1",s={generatePaymentLink:function(){return"".concat(a,"/link/generate")},paymentAccounts:function(){return"".concat(a,"/accounts")},saveSettings:function(){return"".concat(a,"/accounts/store")},dealStatus:function(){return"".concat(a,"/pay-status")},saveDealStatus:function(){return"".concat(a,"/pay-status/store")},deletePaymentAccount:function(e){return"".concat(a,"/accounts/destroy/").concat(e)}}}}]);
//# sourceMappingURL=8769.af1d17d7.chunk.js.map