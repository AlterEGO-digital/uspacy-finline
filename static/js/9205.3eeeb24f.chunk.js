"use strict";(self.webpackChunkcontainer=self.webpackChunkcontainer||[]).push([[9205],{4074:(e,n,r)=>{r.d(n,{A:()=>Q});var t,o,i=r(4848),l=r(4516),a=r(4408),c=r(1527),u=r(9422),s=r(2339),d=r(6816),p=r(4276),f=r(1226),h=r(7883),v=r(7852),m=r(416),x=r(2742),y=r(9678),b=r(4262),g=r(3263),j=function(){var e=(0,g.A)(),n=e.data,r=e.isLoading,t=e.isError,o=e.error,i=e.refetch,l=(0,p.A)().deal,a=function(){var e=["UAH","USD","EUR"],n=b.l.XTS;return y.Cu||y.zD?function(e,n,r){if(r||2===arguments.length)for(var t,o=0,i=n.length;o<i;o++)!t&&o in n||(t||(t=Array.prototype.slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||Array.prototype.slice.call(n))}([n],e,!0):e}(),u=(0,c.useMemo)(function(){var e,n;return null!==(n=null===(e=null==l?void 0:l.contacts)||void 0===e?void 0:e.map(function(e){return Array.isArray(null==e?void 0:e.email)?e.email.map(function(n){var r,t,o;return{id:null!==(r=null==n?void 0:n.value)&&void 0!==r?r:"",label:null!==(t=null==n?void 0:n.value)&&void 0!==t?t:"",owner:null!==(o=null==e?void 0:e.title)&&void 0!==o?o:""}}):[]}).flat().filter(function(e){return!!(null==e?void 0:e.label)}))&&void 0!==n?n:[]},[l]),s=(0,c.useMemo)(function(){var e,n;return null!==(n=null===(e=null==l?void 0:l.contacts)||void 0===e?void 0:e.map(function(e){return Array.isArray(e.phone)?e.phone.map(function(n){var r,t,o;return{id:null!==(r=null==n?void 0:n.value)&&void 0!==r?r:"",label:null!==(t=null==n?void 0:n.value)&&void 0!==t?t:"",owner:null!==(o=null==e?void 0:e.title)&&void 0!==o?o:""}}):[]}).flat().filter(function(e){return!!e.label}))&&void 0!==n?n:[]},[l]);return{accounts:n,currencies:a,recieptDeliveryTransports:["None","Email","SMS","Viber"],emails:u,phones:s,isLoading:r,isError:t,error:o,refetchAccounts:i}},w=r(8247),k=r(9596),S=function(){var e=(0,s.useTranslation)("payment").t;return(0,i.jsx)(a.Stack,{sx:{height:"400px",alignItems:"center",justifyContent:"center",gap:2,px:1},children:(0,i.jsx)(a.Typography,{variant:"h3",children:e("payment:deal.notFound")})})},C=r(8217),T=function(){var e=(0,s.useTranslation)("payment").t;return(0,i.jsxs)(a.Stack,{sx:{height:"400px",alignItems:"center",justifyContent:"center",gap:2,px:1},children:[(0,i.jsx)(a.Typography,{variant:"h1",children:e("payment:views.empty.title")}),(0,i.jsx)(a.Typography,{variant:"body1",sx:{maxWidth:"65ch",textAlign:"center"},children:e("payment:views.empty.reason")})]})},A=function(){return(0,i.jsxs)(a.Stack,{height:"100%",sx:{pt:1,width:"536px",mx:"auto"},children:[(0,i.jsx)(a.Grid,{container:!0,spacing:1,children:[12,8,4,6,6,8,4].map(function(e,n){return(0,i.jsx)(a.Grid,{item:!0,xs:e,children:(0,i.jsxs)(a.Stack,{spacing:.5,children:[(0,i.jsx)(a.Skeleton,{variant:"text",animation:"wave",sx:{height:16,width:"30%"}}),(0,i.jsx)(a.Skeleton,{variant:"rounded",animation:"wave",sx:{height:56,width:"100%",borderRadius:1}})]})},n)})}),(0,i.jsx)(a.Stack,{pt:3,width:"100%",children:(0,i.jsx)(a.Skeleton,{variant:"rounded",animation:"wave",sx:{height:40,width:"100%",borderRadius:1}})})]})};function E(){return E=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},E.apply(null,arguments)}const O=e=>c.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),t||(t=c.createElement("rect",{width:14,height:14,x:8,y:8,rx:2,ry:2})),o||(o=c.createElement("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})));var D,G,I;function F(){return F=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},F.apply(null,arguments)}const L=e=>c.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),D||(D=c.createElement("path",{d:"m12 15 2 2 4-4"})),G||(G=c.createElement("rect",{width:14,height:14,x:8,y:8,rx:2,ry:2})),I||(I=c.createElement("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})));var W=function(e){var n=e.onClick,r=e.link,t=(0,s.useTranslation)(["translation","payment"]).t,o=(0,c.useState)(!1),l=o[0],u=o[1],d=(0,f.h)(),p=d.errorNotification,m=d.successNotification,x=(0,c.useRef)(null),y=(0,h.jL)();return(0,c.useEffect)(function(){return function(){y(v.E.resetGeneratingRequest()),x.current&&clearTimeout(x.current)}},[]),(0,i.jsxs)(a.Stack,{sx:{height:"400px",gap:3,pt:2,alignItems:"center",justifyContent:"center",width:"536px",mx:"auto"},children:[(0,i.jsx)(a.Typography,{component:"h2",fontSize:"2rem",textAlign:"center",fontWeight:"600",color:"success.main",children:t("payment:views.success.title")}),(0,i.jsxs)(a.Box,{sx:{p:2,width:"100%",maxWidth:"400px",textAlign:"center"},children:[(0,i.jsxs)(a.Stack,{gap:2,children:[(0,i.jsx)(a.Typography,{component:"p",fontWeight:"600",color:"text.secondary",children:t("payment:views.success.reason")}),(0,i.jsx)(a.Typography,{component:"a",href:r,target:"_blank",rel:"noopeneer noreferrer",color:"text.secondary",sx:{textDecoration:"none"},children:r}),(0,i.jsx)(k.W,{disabled:l,endIcon:l?(0,i.jsx)(L,{}):(0,i.jsx)(O,{}),sx:{mx:"auto",width:"90%",color:"#fff","&:disabled":{color:"#fff",opacity:"0.5"}},onClick:function(){return e=void 0,n=void 0,i=function(){return function(e,n){var r,t,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=a(0),l.throw=a(1),l.return=a(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(i=0)),i;)try{if(r=1,t&&(o=2&a[0]?t.return:a[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,a[1])).done)return o;switch(t=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],t=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,navigator.clipboard.writeText(r)];case 1:return e.sent(),u(!0),m(t("translation:common.copiedToClipboard")),x.current=setTimeout(function(){return u(!1)},2e3),[3,3];case 2:return e.sent(),p(t("translation:common.errors.copyToClipboard")),[3,3];case 3:return[2]}})},new((o=void 0)||(o=Promise))(function(r,t){function l(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof o?n:new o(function(e){e(n)})).then(l,a)}c((i=i.apply(e,n||[])).next())});var e,n,o,i},children:t("translation:common.buttons.copy")})]}),(0,i.jsxs)(a.Stack,{justifyContent:"center",sx:{position:"relative",mt:1,height:"40px",maxWidth:"80%",mx:"auto"},children:[(0,i.jsx)(a.Typography,{component:"span",color:"text.secondary",sx:{p:1,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",zIndex:1},children:t("translation:common.or")}),(0,i.jsx)(a.Divider,{})]}),(0,i.jsxs)(a.Stack,{gap:2,sx:{mt:1},children:[(0,i.jsx)(a.Typography,{component:"p",color:"text.secondary",sx:{maxWidth:"65ch",textAlign:"center",mx:"auto"},children:t("payment:views.success.description")}),(0,i.jsx)(a.Button,{onClick:function(e){y(v.E.resetGeneratingRequest()),e.stopPropagation(),n()},variant:"outlined",sx:{mx:"auto",width:"fit-content",color:"background.brand",borderColor:"background.brand","&:hover":{borderColor:"background.brand"}},children:t("payment:views.success.back")})]})]})]})},P=function(){return P=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},P.apply(this,arguments)},N=function(e,n,r){var t=r.selected;return(0,i.jsx)(a.Box,P({component:"li"},e,{sx:{textAlign:"left",display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",p:1,backgroundColor:t?"background.tags":""},children:(0,i.jsxs)(a.Box,{width:"100%",children:[(0,i.jsx)(a.Box,{component:"div",sx:{font:"medium"},children:n.label}),(0,i.jsx)(a.Box,{component:"div",color:"text.secondary",sx:{fontSize:"12px"},children:n.owner})]})}))},q=N,B=N,M=r(6084),R=function(){return R=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},R.apply(this,arguments)},V=function(e){var n=e.getError,r=e.getTranslationKey,t=e.isDisabled,o=(0,u.useFormContext)(),l=o.control,d=o.watch,p=(0,s.useTranslation)(["payment","validation"]).t,f=d("currency"),h=(0,M.k)(f),v=(0,c.useMemo)(function(){return function(e){var n;if(!["Backspace","ArrowLeft","ArrowRight","Delete","Tab"].includes(e.key)){var r=e.target,t=r.value,o=e.key,i=/^\d$/.test(o),l="."===o||","===o,a=t.includes(".")?".":t.includes(",")?",":null;if(i){if(a){var c=t.indexOf(a);if((null!==(n=r.selectionStart)&&void 0!==n?n:0)>c&&(t.split(a)[1]||"").length>=2)return void e.preventDefault()}}else l&&!a||e.preventDefault()}}},[]);return(0,i.jsx)(u.Controller,{name:"amount",control:l,render:function(e){var o=e.field,l=n(o.name);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!l,disabled:h||t,children:[(0,i.jsx)(C.iy,{children:p(r("labels.amount"))}),(0,i.jsx)(C.ks,R({},o,{onKeyDown:v,error:!!l,helperText:p(l),value:h?M.w.toFixed(2):o.value,placeholder:p(r("placeholders.amount")),disabled:h||t})),h&&(0,i.jsx)(a.FormHelperText,{children:p(r("helperText.testPayment"))})]})}})},z=r(1366),U=function(e){return"validation:common.".concat(e)},H=z.pipe(z.object({id:z.union([z.number(),z.string()]),label:z.string()}),z.check(function(e){return null!==e},U("predefined"))),K=z.union([z.pipe(z.string(U("invalidString")),z.trim(),z.nonEmpty(U("required")),z.email(U("invalidEmail"))),z.object({id:z.string(U("invalidString")),label:z.string(U("invalidString")),owner:z.string()})],U("required")),X=z.union([z.pipe(z.string(U("invalidString")),z.trim(),z.nonEmpty(U("required"))),z.object({id:z.string(U("invalidString")),label:z.string(U("invalidString")),owner:z.string()})],U("required")),$=z.object({description:z.pipe(z.string(U("invalidString")),z.trim(),z.nonEmpty(U("required"))),amount:z.pipe(z.string(U("invalidString")),z.trim(),z.nonEmpty(U("required")),z.check(function(e){return!isNaN(Number(e))},function(){return U("invalidNumber")})),currency:z.enum(b.l),email:K,phone:X,paymentAccount:H,receiptDelivery:z.enum(b.I)}),_=function(){return _=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},_.apply(this,arguments)},J=function(e){var n=e.initial,r=e.onSubmit,t=e.disabled,o=e.loading,d=void 0!==o&&o,p=(0,u.useForm)({defaultValues:n,resolver:(0,l.c)($)}),f=j(),h=f.accounts,v=f.currencies,m=f.recieptDeliveryTransports,x=f.emails,y=f.phones,b=(0,s.useTranslation)(["payment","validation"]).t;(0,c.useEffect)(function(){h.length&&p.setValue("paymentAccount",h[0])},[h]);var g=p.formState.isSubmitting||t;return(0,i.jsx)(u.FormProvider,_({},p,{children:(0,i.jsxs)(a.Box,{component:"form",sx:{pt:4,px:1},onSubmit:p.handleSubmit(function(e){r(e)}),children:[(0,i.jsxs)(a.Grid,{container:!0,spacing:4,children:[(0,i.jsx)(a.Grid,{item:!0,xs:12,children:(0,i.jsx)(u.Controller,{name:"description",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,i.jsx)(C.iy,{children:b(S("labels.description"))}),(0,i.jsx)(C.ks,_({},n,{error:!!r,helperText:b(r),placeholder:b(S("placeholders.description")),disabled:g}))]})}})}),(0,i.jsx)(a.Grid,{item:!0,xs:8,children:(0,i.jsx)(V,{isDisabled:g,getError:w,getTranslationKey:S})}),(0,i.jsx)(a.Grid,{item:!0,xs:4,children:(0,i.jsx)(u.Controller,{name:"currency",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,i.jsx)(C.iy,{children:b(S("labels.currency"))}),(0,i.jsx)(C.ks,_({},n,{select:!0,error:!!r,helperText:b(r),id:"currency",placeholder:b(S("placeholders.currency")),disabled:g,children:null==v?void 0:v.map(function(e){return(0,i.jsx)(a.MenuItem,{value:e,children:(n=e,(0,M.k)(n)?"".concat(n," (for test account)"):n)},e);var n})}))]})}})}),(0,i.jsx)(a.Grid,{item:!0,xs:6,children:(0,i.jsx)(u.Controller,{name:"email",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,i.jsx)(C.iy,{children:b(S("labels.email"))}),(0,i.jsx)(C.G3,_({},n,{freeSolo:!0,options:x,disabled:g,onInputChange:function(e,r){n.onChange(r)},onChange:function(e,r){n.onChange(r)},renderOption:q,renderInput:function(e){return(0,i.jsx)(C.ks,_({},e,{error:!!r,helperText:b(r),placeholder:b(S("placeholders.email")),disabled:g}))}}))]})}})}),(0,i.jsx)(a.Grid,{item:!0,xs:6,children:(0,i.jsx)(u.Controller,{name:"phone",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,i.jsx)(C.iy,{children:b(S("labels.phone"))}),(0,i.jsx)(C.G3,_({},n,{freeSolo:!0,options:y,disabled:g,onInputChange:function(e,r){n.onChange(r)},onChange:function(e,r){n.onChange(r)},renderOption:B,renderInput:function(e){return(0,i.jsx)(C.ks,_({},e,{error:!!r,helperText:b(r),placeholder:b(S("placeholders.phone")),disabled:g}))}}))]})}})}),(0,i.jsx)(a.Grid,{item:!0,xs:8,children:(0,i.jsx)(u.Controller,{name:"paymentAccount",control:p.control,render:function(e){var n=e.field,r=n.value,t=n.onChange,o=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]])}return r}(n,["value","onChange"]),l=w(o.name);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!l,disabled:g,children:[(0,i.jsx)(C.iy,{children:b(S("labels.paymentAccount"))}),(0,i.jsx)(C.ks,_({},o,{select:!0,value:(null==r?void 0:r.id)||"",onChange:function(e){var n=e.target.value,r=null==h?void 0:h.find(function(e){return e.id===n});t(r||null)},error:!!l,helperText:b(l),id:"currency",placeholder:b(S("placeholders.paymentAccount")),disabled:g,children:null==h?void 0:h.map(function(e){return(0,i.jsx)(a.MenuItem,{value:e.id,children:e.label},e.id)})}))]})}})}),(0,i.jsx)(a.Grid,{item:!0,xs:4,children:(0,i.jsx)(u.Controller,{name:"receiptDelivery",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,i.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,i.jsx)(C.iy,{children:b(S("labels.receiptDelivery"))}),(0,i.jsx)(C.ks,_({},n,{select:!0,error:!!r,helperText:b(r),placeholder:b(S("placeholders.receiptDelivery")),disabled:g,children:null==m?void 0:m.map(function(e){return(0,i.jsx)(a.MenuItem,{value:e,children:b(S("predefined.receiptDelivery.".concat(e.toLowerCase())))},e)})}))]})}})})]}),(0,i.jsx)(a.Stack,{pt:3,flexDirection:"row",justifyContent:"center",children:(0,i.jsx)(k.y,{fullWidth:!0,loading:d,type:"submit",variant:"contained",disabled:g,children:b(S("submit"))})})]})}));function w(e){var n,r,t=null!==(r=null===(n=p.formState.errors[e])||void 0===n?void 0:n.message)&&void 0!==r?r:"";return t?b(t):""}function S(e){return"payment:paymentForm.".concat(e)}};const Q=function(){var e=(0,c.useState)("idle"),n=e[0],r=e[1],t=(0,c.useRef)(null),o=(0,p.A)().deal,l=function(){var e=(0,h.jL)(),n=(0,h.GV)(x.zL),r=(0,h.GV)(x.qu),t=(0,h.GV)(x.x4),o=(0,h.GV)(x.GU);return{paymentLink:n,generateLink:function(n){return r=void 0,t=void 0,i=function(){return function(e,n){var r,t,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=a(0),l.throw=a(1),l.return=a(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(i=0)),i;)try{if(r=1,t&&(o=2&a[0]?t.return:a[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,a[1])).done)return o;switch(t=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],t=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(r){return[2,e((0,m.Cc)(n))]})},new((o=void 0)||(o=Promise))(function(e,n){function l(e){try{c(i.next(e))}catch(e){n(e)}}function a(e){try{c(i.throw(e))}catch(e){n(e)}}function c(n){var r;n.done?e(n.value):(r=n.value,r instanceof o?r:new o(function(e){e(r)})).then(l,a)}c((i=i.apply(r,t||[])).next())});var r,t,o,i},isLoading:t,error:o,isError:!!o,isSuccess:r,reset:(0,c.useCallback)(function(){e(v.E.resetGeneratingRequest())},[])}}(),u=l.paymentLink,s=l.generateLink,g=l.isLoading,k=l.error,C=l.isSuccess,E=l.reset,O=j(),D=O.accounts,G=O.currencies,I=O.isLoading,F=(0,f.h)(),L=F.errorNotification,P=F.successNotification,N=(0,c.useMemo)(function(){return function(e,n){var r,t,o,i,l,a,c;if(!Array.isArray(null==e?void 0:e.contacts))return{amount:"",currency:y.Cu||y.zD?b.l.XTS:b.l.UAH,description:"",email:"",paymentAccount:{id:"",label:""},phone:"",receiptDelivery:b.I.None};var u=((null==e?void 0:e.contacts)||[])[0],s=Array.isArray(null==u?void 0:u.email)?null===(r=u.email[0])||void 0===r?void 0:r.value:"",d=Array.isArray(null==u?void 0:u.phone)?null===(t=u.phone[0])||void 0===t?void 0:t.value:"",p=Array.isArray(null==u?void 0:u.email)?null===(i=null===(o=null==u?void 0:u.email)||void 0===o?void 0:o.find(function(e){return!!(null==e?void 0:e.main)}))||void 0===i?void 0:i.value:s,f=Array.isArray(null==u?void 0:u.phone)?null===(a=null===(l=null==u?void 0:u.phone)||void 0===l?void 0:l.find(function(e){return!!(null==e?void 0:e.main)}))||void 0===a?void 0:a.value:d,h=y.Cu||y.zD?b.l.XTS:n.find(function(n){var r;return n===(null===(r=null==e?void 0:e.amount)||void 0===r?void 0:r.currency)})||b.l.UAH;return{amount:(null===(c=null==e?void 0:e.amount)||void 0===c?void 0:c.value)||"0.00",email:p,phone:f,currency:h,description:"",paymentAccount:null,receiptDelivery:b.I.None}}(o,G)},[o,G]),q="idle"===n,B="success"===n,M=(0,c.useCallback)(function(){E(),r("idle")},[]),R=(0,c.useCallback)(function(e){return n=void 0,r=void 0,i=function(){var n;return function(e,n){var r,t,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=a(0),l.throw=a(1),l.return=a(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(i=0)),i;)try{if(r=1,t&&(o=2&a[0]?t.return:a[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,a[1])).done)return o;switch(t=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],t=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(r){switch(r.label){case 0:return n=(0,w.j)(e,o.id),[4,s(n)];case 1:return r.sent(),[2]}})},new((t=void 0)||(t=Promise))(function(e,o){function l(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t(function(e){e(r)})).then(l,a)}c((i=i.apply(n,r||[])).next())});var n,r,t,i},[o]);if((0,c.useEffect)(function(){k&&(L((0,d.u)(k).message),t.current=setTimeout(function(){E(),t.current=null},3e3))},[k]),(0,c.useEffect)(function(){C&&(P(),r("success"))},[C]),(0,c.useEffect)(function(){return E(),function(){r("idle"),E(),null!==t.current&&(clearTimeout(t.current),t.current=null)}},[]),!o)return(0,i.jsx)(S,{});if(I)return(0,i.jsx)(A,{});if(!(null==D?void 0:D.length)&&!I)return(0,i.jsx)(T,{});var V=!I&&!!(null==D?void 0:D.length);return(0,i.jsx)(c.Suspense,{fallback:(0,i.jsx)(A,{}),children:(0,i.jsx)(i.Fragment,{children:V&&(0,i.jsxs)(i.Fragment,{children:[q&&(0,i.jsxs)(a.Stack,{gap:2,children:[(0,i.jsx)(J,{onSubmit:R,initial:N,disabled:g,loading:g}),!!k&&(0,i.jsx)(a.FormHelperText,{error:!0,sx:{fontSize:"1rem"},children:(0,d.u)(k).message})]}),B&&(0,i.jsx)(W,{link:u,onClick:M})]})})})}},4276:(e,n,r)=>{r.d(n,{A:()=>l});var t=r(3512),o=r(4650),i=function(e){var n=e.app.deal;return(null==n?void 0:n.amount)||(null==n?void 0:n.contacts)||(null==n?void 0:n.id)?n:null},l=function(){var e=(0,t.useDispatch)();return{deal:(0,t.useSelector)(i),hydrateDeal:function(n){return e((0,o.Es)(n))},clearDeal:function(){return e((0,o.K6)())}}}},5076:(e,n,r)=>{r.d(n,{D:()=>l});var t=r(4848),o=r(1527),i=r(4276),l=function(e){var n=e.children,r=e.deal,l=(0,i.A)(),a=l.hydrateDeal,c=l.clearDeal;return(0,o.useEffect)(function(){r&&a(r)},[r]),(0,o.useEffect)(function(){return function(){c()}},[]),(0,t.jsx)(t.Fragment,{children:n})}}}]);
//# sourceMappingURL=9205.3eeeb24f.chunk.js.map