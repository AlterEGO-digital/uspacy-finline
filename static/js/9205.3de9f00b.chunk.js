"use strict";(self.webpackChunkcontainer=self.webpackChunkcontainer||[]).push([[9205],{4074:(e,n,r)=>{r.d(n,{A:()=>Q});var t,i,o=r(4848),l=r(4516),a=r(4408),c=r(1527),u=r(9422),s=r(2339),d=r(6816),p=r(4276),f=r(1226),h=r(7883),v=r(7852),x=r(416),m=r(2742),y=r(9678),b=r(4262),g=r(3263),j=function(){var e=(0,g.A)(),n=e.data,r=e.isLoading,t=e.isError,i=e.error,o=e.refetch,l=(0,p.A)().deal,a=function(){var e=["UAH","USD","EUR"],n=b.l.XTS;return y.Cu||y.zD?function(e,n,r){if(r||2===arguments.length)for(var t,i=0,o=n.length;i<o;i++)!t&&i in n||(t||(t=Array.prototype.slice.call(n,0,i)),t[i]=n[i]);return e.concat(t||Array.prototype.slice.call(n))}([n],e,!0):e}(),u=(0,c.useMemo)(function(){var e,n;return null!==(n=null===(e=null==l?void 0:l.contacts)||void 0===e?void 0:e.map(function(e){return Array.isArray(null==e?void 0:e.email)?e.email.map(function(n){var r,t,i;return{id:null!==(r=null==n?void 0:n.value)&&void 0!==r?r:"",label:null!==(t=null==n?void 0:n.value)&&void 0!==t?t:"",owner:null!==(i=null==e?void 0:e.title)&&void 0!==i?i:""}}):[]}).flat().filter(function(e){return!!(null==e?void 0:e.label)}))&&void 0!==n?n:[]},[l]),s=(0,c.useMemo)(function(){var e,n;return null!==(n=null===(e=null==l?void 0:l.contacts)||void 0===e?void 0:e.map(function(e){return Array.isArray(e.phone)?e.phone.map(function(n){var r,t,i;return{id:null!==(r=null==n?void 0:n.value)&&void 0!==r?r:"",label:null!==(t=null==n?void 0:n.value)&&void 0!==t?t:"",owner:null!==(i=null==e?void 0:e.title)&&void 0!==i?i:""}}):[]}).flat().filter(function(e){return!!e.label}))&&void 0!==n?n:[]},[l]);return{accounts:n,currencies:a,recieptDeliveryTransports:["None","Email","SMS","Viber"],emails:u,phones:s,isLoading:r,isError:t,error:i,refetchAccounts:o}},w=r(8247),k=r(9596),S=function(){var e=(0,s.useTranslation)("payment").t;return(0,o.jsx)(a.Stack,{sx:{height:"400px",alignItems:"center",justifyContent:"center",gap:2,px:1},children:(0,o.jsx)(a.Typography,{variant:"h3",children:e("payment:deal.notFound")})})},C=r(8217),T=function(){var e=(0,s.useTranslation)("payment").t;return(0,o.jsxs)(a.Stack,{sx:{height:"400px",alignItems:"center",justifyContent:"center",gap:2,px:1},children:[(0,o.jsx)(a.Typography,{variant:"h1",children:e("payment:views.empty.title")}),(0,o.jsx)(a.Typography,{variant:"body1",sx:{maxWidth:"65ch",textAlign:"center"},children:e("payment:views.empty.reason")})]})},A=function(){return(0,o.jsx)(a.Grid,{container:!0,spacing:4,sx:{width:"568px",mx:"auto"},children:(0,o.jsx)(a.Grid,{item:!0,xs:12,children:(0,o.jsxs)(a.Stack,{height:"100%",sx:{pt:1},children:[(0,o.jsx)(a.Grid,{container:!0,spacing:1,children:[12,8,4,6,6,8,4].map(function(e,n){return(0,o.jsx)(a.Grid,{item:!0,xs:e,children:(0,o.jsxs)(a.Stack,{spacing:.5,children:[(0,o.jsx)(a.Skeleton,{variant:"text",animation:"wave",sx:{height:16,width:"30%"}}),(0,o.jsx)(a.Skeleton,{variant:"rounded",animation:"wave",sx:{height:56,width:"100%",borderRadius:1}})]})},n)})}),(0,o.jsx)(a.Stack,{pt:3,width:"100%",children:(0,o.jsx)(a.Skeleton,{variant:"rounded",animation:"wave",sx:{height:40,width:"100%",borderRadius:1}})})]})})})};function O(){return O=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},O.apply(null,arguments)}const E=e=>c.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),t||(t=c.createElement("rect",{width:14,height:14,x:8,y:8,rx:2,ry:2})),i||(i=c.createElement("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})));var D,G,I;function F(){return F=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},F.apply(null,arguments)}const L=e=>c.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),D||(D=c.createElement("path",{d:"m12 15 2 2 4-4"})),G||(G=c.createElement("rect",{width:14,height:14,x:8,y:8,rx:2,ry:2})),I||(I=c.createElement("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})));var W=function(e){var n=e.onClick,r=e.link,t=(0,s.useTranslation)(["translation","payment"]).t,i=(0,c.useState)(!1),l=i[0],u=i[1],d=(0,f.h)(),p=d.errorNotification,h=d.successNotification,v=(0,c.useRef)(null);return(0,c.useEffect)(function(){return function(){v.current&&clearTimeout(v.current)}},[]),(0,o.jsx)(a.Grid,{container:!0,spacing:4,sx:{width:"568px",mx:"auto"},children:(0,o.jsx)(a.Grid,{item:!0,xs:12,children:(0,o.jsxs)(a.Stack,{sx:{height:"400px",gap:3,pt:2,alignItems:"center",justifyContent:"center"},children:[(0,o.jsx)(a.Typography,{component:"h2",fontSize:"2rem",textAlign:"center",fontWeight:"600",color:"success.main",children:t("payment:views.success.title")}),(0,o.jsxs)(a.Box,{sx:{p:2,width:"100%",maxWidth:"400px",textAlign:"center"},children:[(0,o.jsxs)(a.Stack,{gap:2,children:[(0,o.jsx)(a.Typography,{component:"p",fontWeight:"600",color:"text.secondary",children:t("payment:views.success.reason")}),(0,o.jsx)(a.Typography,{component:"a",href:r,target:"_blank",rel:"noopeneer noreferrer",color:"text.secondary",sx:{textDecoration:"none"},children:r}),(0,o.jsx)(k.W,{disabled:l,endIcon:l?(0,o.jsx)(L,{}):(0,o.jsx)(E,{}),sx:{mx:"auto",width:"90%",color:"#fff","&:disabled":{color:"#fff",opacity:"0.5"}},onClick:function(){return e=void 0,n=void 0,o=function(){return function(e,n){var r,t,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=a(0),l.throw=a(1),l.return=a(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(o=0)),o;)try{if(r=1,t&&(i=2&a[0]?t.return:a[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,a[1])).done)return i;switch(t=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,t=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(e,o)}catch(e){a=[6,e],t=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,navigator.clipboard.writeText(r)];case 1:return e.sent(),u(!0),h(t("translation:common.copiedToClipboard")),v.current=setTimeout(function(){return u(!1)},2e3),[3,3];case 2:return e.sent(),p(t("translation:common.errors.copyToClipboard")),[3,3];case 3:return[2]}})},new((i=void 0)||(i=Promise))(function(r,t){function l(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof i?n:new i(function(e){e(n)})).then(l,a)}c((o=o.apply(e,n||[])).next())});var e,n,i,o},children:t("translation:common.buttons.copy")})]}),(0,o.jsxs)(a.Stack,{justifyContent:"center",sx:{position:"relative",mt:1,height:"40px",maxWidth:"80%",mx:"auto"},children:[(0,o.jsx)(a.Typography,{component:"span",color:"text.secondary",sx:{p:1,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",zIndex:1},children:t("translation:common.or")}),(0,o.jsx)(a.Divider,{})]}),(0,o.jsxs)(a.Stack,{gap:2,sx:{mt:1},children:[(0,o.jsx)(a.Typography,{component:"p",color:"text.secondary",sx:{maxWidth:"65ch",textAlign:"center",mx:"auto"},children:t("payment:views.success.description")}),(0,o.jsx)(a.Button,{onClick:function(e){e.stopPropagation(),n()},variant:"outlined",sx:{mx:"auto",width:"fit-content",color:"background.brand",borderColor:"background.brand","&:hover":{borderColor:"background.brand"}},children:t("payment:views.success.back")})]})]})]})})})},P=function(){return P=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},P.apply(this,arguments)},N=function(e,n,r){var t=r.selected;return(0,o.jsx)(a.Box,P({component:"li"},e,{sx:{textAlign:"left",display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",p:1,backgroundColor:t?"background.tags":""},children:(0,o.jsxs)(a.Box,{width:"100%",children:[(0,o.jsx)(a.Box,{component:"div",sx:{font:"medium"},children:n.label}),(0,o.jsx)(a.Box,{component:"div",color:"text.secondary",sx:{fontSize:"12px"},children:n.owner})]})}))},B=N,M=N,V=r(6084),q=function(){return q=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},q.apply(this,arguments)},z=function(e){var n=e.getError,r=e.getTranslationKey,t=e.isDisabled,i=(0,u.useFormContext)(),l=i.control,d=i.watch,p=(0,s.useTranslation)(["payment","validation"]).t,f=d("currency"),h=(0,V.k)(f),v=(0,c.useMemo)(function(){return function(e){var n;if(!["Backspace","ArrowLeft","ArrowRight","Delete","Tab"].includes(e.key)){var r=e.target,t=r.value,i=e.key,o=/^\d$/.test(i),l="."===i||","===i,a=t.includes(".")?".":t.includes(",")?",":null;if(o){if(a){var c=t.indexOf(a);if((null!==(n=r.selectionStart)&&void 0!==n?n:0)>c&&(t.split(a)[1]||"").length>=2)return void e.preventDefault()}}else l&&!a||e.preventDefault()}}},[]);return(0,o.jsx)(u.Controller,{name:"amount",control:l,render:function(e){var i=e.field,l=n(i.name);return(0,o.jsxs)(a.FormControl,{fullWidth:!0,error:!!l,disabled:h||t,children:[(0,o.jsx)(C.iy,{children:p(r("labels.amount"))}),(0,o.jsx)(C.ks,q({},i,{onKeyDown:v,error:!!l,helperText:p(l),value:h?V.w.toFixed(2):i.value,placeholder:p(r("placeholders.amount")),disabled:h||t})),h&&(0,o.jsx)(a.FormHelperText,{children:p(r("helperText.testPayment"))})]})}})},R=r(1366),U=function(e){return"validation:common.".concat(e)},H=R.pipe(R.object({id:R.union([R.number(),R.string()]),label:R.string()}),R.check(function(e){return null!==e},U("predefined"))),K=R.union([R.pipe(R.string(U("invalidString")),R.trim(),R.nonEmpty(U("required")),R.email(U("invalidEmail"))),R.object({id:R.string(U("invalidString")),label:R.string(U("invalidString")),owner:R.string()})],U("required")),X=R.union([R.pipe(R.string(U("invalidString")),R.trim(),R.nonEmpty(U("required"))),R.object({id:R.string(U("invalidString")),label:R.string(U("invalidString")),owner:R.string()})],U("required")),$=R.object({description:R.pipe(R.string(U("invalidString")),R.trim(),R.nonEmpty(U("required"))),amount:R.pipe(R.string(U("invalidString")),R.trim(),R.nonEmpty(U("required")),R.check(function(e){return!isNaN(Number(e))},function(){return U("invalidNumber")})),currency:R.enum(b.l),email:K,phone:X,paymentAccount:H,receiptDelivery:R.enum(b.I)}),_=function(){return _=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},_.apply(this,arguments)},J=function(e){var n=e.initial,r=e.onSubmit,t=e.disabled,i=e.loading,d=void 0!==i&&i,p=(0,u.useForm)({defaultValues:n,resolver:(0,l.c)($)}),f=j(),h=f.accounts,v=f.currencies,x=f.recieptDeliveryTransports,m=f.emails,y=f.phones,b=(0,s.useTranslation)(["payment","validation"]).t;(0,c.useEffect)(function(){h.length&&p.setValue("paymentAccount",h[0])},[h]);var g=p.formState.isSubmitting||t;return(0,o.jsx)(u.FormProvider,_({},p,{children:(0,o.jsxs)(a.Box,{component:"form",sx:{pt:4,px:1},onSubmit:p.handleSubmit(function(e){r(e)}),children:[(0,o.jsxs)(a.Grid,{container:!0,spacing:4,children:[(0,o.jsx)(a.Grid,{item:!0,xs:12,children:(0,o.jsx)(u.Controller,{name:"description",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,o.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,o.jsx)(C.iy,{children:b(S("labels.description"))}),(0,o.jsx)(C.ks,_({},n,{error:!!r,helperText:b(r),placeholder:b(S("placeholders.description")),disabled:g}))]})}})}),(0,o.jsx)(a.Grid,{item:!0,xs:8,children:(0,o.jsx)(z,{isDisabled:g,getError:w,getTranslationKey:S})}),(0,o.jsx)(a.Grid,{item:!0,xs:4,children:(0,o.jsx)(u.Controller,{name:"currency",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,o.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,o.jsx)(C.iy,{children:b(S("labels.currency"))}),(0,o.jsx)(C.ks,_({},n,{select:!0,error:!!r,helperText:b(r),id:"currency",placeholder:b(S("placeholders.currency")),disabled:g,children:null==v?void 0:v.map(function(e){return(0,o.jsx)(a.MenuItem,{value:e,children:(n=e,(0,V.k)(n)?"".concat(n," (for test account)"):n)},e);var n})}))]})}})}),(0,o.jsx)(a.Grid,{item:!0,xs:6,children:(0,o.jsx)(u.Controller,{name:"email",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,o.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,o.jsx)(C.iy,{children:b(S("labels.email"))}),(0,o.jsx)(C.G3,_({},n,{freeSolo:!0,options:m,disabled:g,onInputChange:function(e,r){n.onChange(r)},onChange:function(e,r){n.onChange(r)},renderOption:B,renderInput:function(e){return(0,o.jsx)(C.ks,_({},e,{error:!!r,helperText:b(r),placeholder:b(S("placeholders.email")),disabled:g}))}}))]})}})}),(0,o.jsx)(a.Grid,{item:!0,xs:6,children:(0,o.jsx)(u.Controller,{name:"phone",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,o.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,o.jsx)(C.iy,{children:b(S("labels.phone"))}),(0,o.jsx)(C.G3,_({},n,{freeSolo:!0,options:y,disabled:g,onInputChange:function(e,r){n.onChange(r)},onChange:function(e,r){n.onChange(r)},renderOption:M,renderInput:function(e){return(0,o.jsx)(C.ks,_({},e,{error:!!r,helperText:b(r),placeholder:b(S("placeholders.phone")),disabled:g}))}}))]})}})}),(0,o.jsx)(a.Grid,{item:!0,xs:8,children:(0,o.jsx)(u.Controller,{name:"paymentAccount",control:p.control,render:function(e){var n=e.field,r=n.value,t=n.onChange,i=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)n.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(r[t[i]]=e[t[i]])}return r}(n,["value","onChange"]),l=w(i.name);return(0,o.jsxs)(a.FormControl,{fullWidth:!0,error:!!l,disabled:g,children:[(0,o.jsx)(C.iy,{children:b(S("labels.paymentAccount"))}),(0,o.jsx)(C.ks,_({},i,{select:!0,value:(null==r?void 0:r.id)||"",onChange:function(e){var n=e.target.value,r=null==h?void 0:h.find(function(e){return e.id===n});t(r||null)},error:!!l,helperText:b(l),id:"currency",placeholder:b(S("placeholders.paymentAccount")),disabled:g,children:null==h?void 0:h.map(function(e){return(0,o.jsx)(a.MenuItem,{value:e.id,children:e.label},e.id)})}))]})}})}),(0,o.jsx)(a.Grid,{item:!0,xs:4,children:(0,o.jsx)(u.Controller,{name:"receiptDelivery",control:p.control,render:function(e){var n=e.field,r=w(n.name);return(0,o.jsxs)(a.FormControl,{fullWidth:!0,error:!!r,disabled:g,children:[(0,o.jsx)(C.iy,{children:b(S("labels.receiptDelivery"))}),(0,o.jsx)(C.ks,_({},n,{select:!0,error:!!r,helperText:b(r),placeholder:b(S("placeholders.receiptDelivery")),disabled:g,children:null==x?void 0:x.map(function(e){return(0,o.jsx)(a.MenuItem,{value:e,children:b(S("predefined.receiptDelivery.".concat(e.toLowerCase())))},e)})}))]})}})})]}),(0,o.jsx)(a.Stack,{pt:3,flexDirection:"row",justifyContent:"center",children:(0,o.jsx)(k.y,{fullWidth:!0,loading:d,type:"submit",variant:"contained",disabled:g,children:b(S("submit"))})})]})}));function w(e){var n,r,t=null!==(r=null===(n=p.formState.errors[e])||void 0===n?void 0:n.message)&&void 0!==r?r:"";return t?b(t):""}function S(e){return"payment:paymentForm.".concat(e)}};const Q=function(){var e=(0,c.useState)("idle"),n=e[0],r=e[1],t=(0,c.useRef)(null),i=(0,p.A)().deal,l=function(){var e=(0,h.jL)(),n=(0,h.GV)(m.zL),r=(0,h.GV)(m.qu),t=(0,h.GV)(m.x4),i=(0,h.GV)(m.GU);return{paymentLink:n,generateLink:function(n){return r=void 0,t=void 0,o=function(){return function(e,n){var r,t,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=a(0),l.throw=a(1),l.return=a(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(o=0)),o;)try{if(r=1,t&&(i=2&a[0]?t.return:a[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,a[1])).done)return i;switch(t=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,t=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(e,o)}catch(e){a=[6,e],t=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(r){return[2,e((0,x.Cc)(n))]})},new((i=void 0)||(i=Promise))(function(e,n){function l(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(n){var r;n.done?e(n.value):(r=n.value,r instanceof i?r:new i(function(e){e(r)})).then(l,a)}c((o=o.apply(r,t||[])).next())});var r,t,i,o},isLoading:t,error:i,isError:!!i,isSuccess:r,reset:(0,c.useCallback)(function(){e(v.E.resetGeneratingRequest())},[])}}(),u=l.paymentLink,s=l.generateLink,g=l.isLoading,k=l.error,C=l.isSuccess,O=l.reset,E=j(),D=E.accounts,G=E.currencies,I=E.isLoading,F=(0,f.h)(),L=F.errorNotification,P=F.successNotification,N=(0,c.useMemo)(function(){return function(e,n){var r,t,i,o,l,a,c;if(!Array.isArray(null==e?void 0:e.contacts))return{amount:"",currency:y.Cu||y.zD?b.l.XTS:b.l.UAH,description:"",email:"",paymentAccount:{id:"",label:""},phone:"",receiptDelivery:b.I.None};var u=((null==e?void 0:e.contacts)||[])[0],s=Array.isArray(null==u?void 0:u.email)?null===(r=u.email[0])||void 0===r?void 0:r.value:"",d=Array.isArray(null==u?void 0:u.phone)?null===(t=u.phone[0])||void 0===t?void 0:t.value:"",p=Array.isArray(null==u?void 0:u.email)?null===(o=null===(i=null==u?void 0:u.email)||void 0===i?void 0:i.find(function(e){return!!(null==e?void 0:e.main)}))||void 0===o?void 0:o.value:s,f=Array.isArray(null==u?void 0:u.phone)?null===(a=null===(l=null==u?void 0:u.phone)||void 0===l?void 0:l.find(function(e){return!!(null==e?void 0:e.main)}))||void 0===a?void 0:a.value:d,h=y.Cu||y.zD?b.l.XTS:n.find(function(n){var r;return n===(null===(r=null==e?void 0:e.amount)||void 0===r?void 0:r.currency)})||b.l.UAH;return{amount:(null===(c=null==e?void 0:e.amount)||void 0===c?void 0:c.value)||"0.00",email:p,phone:f,currency:h,description:"",paymentAccount:null,receiptDelivery:b.I.None}}(i,G)},[i,G]),B="idle"===n,M="success"===n,V=(0,c.useCallback)(function(){return r("idle")},[]),q=(0,c.useCallback)(function(e){return n=void 0,r=void 0,o=function(){var n;return function(e,n){var r,t,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=a(0),l.throw=a(1),l.return=a(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(o=0)),o;)try{if(r=1,t&&(i=2&a[0]?t.return:a[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,a[1])).done)return i;switch(t=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,t=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(e,o)}catch(e){a=[6,e],t=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(r){switch(r.label){case 0:return n=(0,w.j)(e,i.id),[4,s(n)];case 1:return r.sent(),[2]}})},new((t=void 0)||(t=Promise))(function(e,i){function l(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t(function(e){e(r)})).then(l,a)}c((o=o.apply(n,r||[])).next())});var n,r,t,o},[i]);if((0,c.useEffect)(function(){k&&(L((0,d.u)(k).message),t.current=setTimeout(function(){O(),t.current=null},3e3))},[k]),(0,c.useEffect)(function(){C&&(P(),r("success"))},[C]),(0,c.useEffect)(function(){return function(){null!==t.current&&(clearTimeout(t.current),t.current=null)}},[]),!i)return(0,o.jsx)(S,{});if(I)return(0,o.jsx)(A,{});if(!(null==D?void 0:D.length)&&!I)return(0,o.jsx)(T,{});var z=!I&&!!(null==D?void 0:D.length);return(0,o.jsx)(c.Suspense,{fallback:(0,o.jsx)(A,{}),children:(0,o.jsx)(o.Fragment,{children:z&&(0,o.jsxs)(o.Fragment,{children:[B&&(0,o.jsxs)(a.Stack,{gap:2,children:[(0,o.jsx)(J,{onSubmit:q,initial:N,disabled:g,loading:g}),!!k&&(0,o.jsx)(a.FormHelperText,{error:!0,sx:{fontSize:"1rem"},children:(0,d.u)(k).message})]}),M&&(0,o.jsx)(W,{link:u,onClick:V})]})})})}},4276:(e,n,r)=>{r.d(n,{A:()=>l});var t=r(3512),i=r(4650),o=function(e){var n=e.app.deal;return(null==n?void 0:n.amount)||(null==n?void 0:n.contacts)||(null==n?void 0:n.id)?n:null},l=function(){var e=(0,t.useDispatch)();return{deal:(0,t.useSelector)(o),hydrateDeal:function(n){return e((0,i.Es)(n))},clearDeal:function(){return e((0,i.K6)())}}}},5076:(e,n,r)=>{r.d(n,{D:()=>l});var t=r(4848),i=r(1527),o=r(4276),l=function(e){var n=e.children,r=e.deal,l=(0,o.A)(),a=l.hydrateDeal,c=l.clearDeal;return(0,i.useEffect)(function(){r&&a(r)},[r]),(0,i.useEffect)(function(){return function(){c()}},[]),(0,t.jsx)(t.Fragment,{children:n})}}}]);
//# sourceMappingURL=9205.3de9f00b.chunk.js.map