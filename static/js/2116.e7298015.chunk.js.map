{"version":3,"file":"static/js/2116.e7298015.chunk.js","mappings":"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","sources":["webpack://container/./src/store/reducers/app/selectors.ts","webpack://container/./src/hooks/useDeal.ts","webpack://container/./src/context/AppProvider/index.tsx","webpack://container/./src/hooks/usePaymentSourceData.ts","webpack://container/./src/store/reducers/payment/local-data.ts","webpack://container/./src/components/ui/DealNotFoundView.tsx","webpack://container/./src/components/ui/PaymentAccountsNotFoundView.tsx","webpack://container/./src/components/ui/PaymentFormSkeleton.tsx","webpack://container/./src/components/ui/PaymnetLinkGenerationSuccess.tsx","webpack://container/./src/components/ui/RenderOption.tsx","webpack://container/./src/components/PaymentForm/PaymentAmountField.tsx","webpack://container/./src/components/PaymentForm/helpers/input.ts","webpack://container/./src/components/PaymentForm/types.ts","webpack://container/./src/components/PaymentForm/index.tsx","webpack://container/./src/components/PaymentForm/helpers/labels.ts","webpack://container/./src/hooks/usePaymentLink.ts","webpack://container/./src/components/PaymentForm/helpers/formState.ts"],"sourcesContent":["export var selectDeal = function (state) {\n    var deal = state.app.deal;\n    if (!(deal === null || deal === void 0 ? void 0 : deal.amount) && !(deal === null || deal === void 0 ? void 0 : deal.contacts) && !(deal === null || deal === void 0 ? void 0 : deal.id)) {\n        return null;\n    }\n    return deal;\n};\n","import { useDispatch, useSelector } from 'react-redux';\nimport { clearDeal, hydrateDeal } from '../store/reducers/app/actions';\nimport { selectDeal } from '../store/reducers/app/selectors';\nexport var useDeal = function () {\n    var dispatch = useDispatch();\n    var deal = useSelector(selectDeal);\n    return {\n        deal: deal,\n        hydrateDeal: function (entity) { return dispatch(hydrateDeal(entity)); },\n        clearDeal: function () { return dispatch(clearDeal()); },\n    };\n};\n","import { Fragment as _Fragment, jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect } from 'react';\nimport { useDeal } from '../../hooks/useDeal';\nexport var AppProvider = function (_a) {\n    var children = _a.children, deal = _a.deal;\n    var _b = useDeal(), hydrateDeal = _b.hydrateDeal, clearDeal = _b.clearDeal;\n    useEffect(function () {\n        if (deal) {\n            hydrateDeal(deal);\n        }\n    }, [deal]);\n    useEffect(function () { return function () {\n        clearDeal();\n    }; }, []);\n    return _jsx(_Fragment, { children: children });\n};\n","import { useMemo } from 'react';\nimport { getCurrencyList, getRecieptDeliveryList } from '../store/reducers/payment/local-data';\nimport { useDeal } from './useDeal';\nimport { usePaymentAccountsList } from './usePaymentAccountsList';\nexport var usePaymentSourceData = function () {\n    var _a = usePaymentAccountsList(), data = _a.data, isLoading = _a.isLoading, isError = _a.isError, error = _a.error, refetch = _a.refetch;\n    var deal = useDeal().deal;\n    var currencies = getCurrencyList();\n    var reciepts = getRecieptDeliveryList();\n    var emails = useMemo(function () {\n        var _a, _b;\n        return (_b = (_a = deal === null || deal === void 0 ? void 0 : deal.contacts) === null || _a === void 0 ? void 0 : _a.map(function (contact) { var _a; return (_a = contact.email) === null || _a === void 0 ? void 0 : _a.map(function (email) { var _a, _b, _c; return ({ id: (_a = email === null || email === void 0 ? void 0 : email.value) !== null && _a !== void 0 ? _a : '', label: (_b = email === null || email === void 0 ? void 0 : email.value) !== null && _b !== void 0 ? _b : '', owner: (_c = contact === null || contact === void 0 ? void 0 : contact.title) !== null && _c !== void 0 ? _c : '' }); }); }).flat().filter(function (email) { return !!(email === null || email === void 0 ? void 0 : email.label); })) !== null && _b !== void 0 ? _b : [];\n    }, [deal]);\n    var phones = useMemo(function () {\n        var _a, _b;\n        return (_b = (_a = deal === null || deal === void 0 ? void 0 : deal.contacts) === null || _a === void 0 ? void 0 : _a.map(function (contact) { return ({ id: contact.phone, label: contact.phone, owner: contact.title }); }).filter(function (phone) { return !!phone.label; })) !== null && _b !== void 0 ? _b : [];\n    }, [deal]);\n    return {\n        accounts: data,\n        currencies: currencies,\n        recieptDeliveryTransports: reciepts,\n        emails: emails,\n        phones: phones,\n        isLoading: isLoading,\n        isError: isError,\n        error: error,\n        refetchAccounts: refetch,\n    };\n};\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { isDev, isStage } from '../../../const';\nimport { PaymentCurrencyEnum } from '../../../models/payment';\nexport var getCurrencyList = function () {\n    var currencies = ['UAH', 'USD', 'EUR'];\n    var testCurrency = PaymentCurrencyEnum.XTS;\n    if (isDev || isStage) {\n        return __spreadArray([testCurrency], currencies, true);\n    }\n    return currencies;\n};\nexport var getRecieptDeliveryList = function () {\n    return ['None', 'Email', 'SMS', 'Viber'];\n};\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Stack, Typography } from '@mui/material';\nimport { useTranslation } from 'react-i18next';\nexport var DealNotFoundView = function () {\n    var t = useTranslation('payment').t;\n    return (_jsx(Stack, { sx: { height: '400px', alignItems: 'center', justifyContent: 'center', gap: 2, px: 1 }, children: _jsx(Typography, { variant: \"h3\", children: t('payment:deal.notFound') }) }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Stack, Typography } from '@mui/material';\nimport { useTranslation } from 'react-i18next';\nexport var PaymentAccountsNotFoundView = function () {\n    var t = useTranslation('payment').t;\n    return (_jsxs(Stack, { sx: { height: '400px', alignItems: 'center', justifyContent: 'center', gap: 2, px: 1 }, children: [_jsx(Typography, { variant: \"h1\", children: t('payment:views.empty.title') }), _jsx(Typography, { variant: \"body1\", sx: { maxWidth: '65ch', textAlign: 'center' }, children: t('payment:views.empty.reason') })] }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Grid, Skeleton, Stack } from '@mui/material';\nexport var PaymentFormSkeleton = function () {\n    return (_jsxs(Stack, { height: \"100%\", sx: { pt: 1 }, children: [_jsx(Grid, { container: true, spacing: 1, children: [12, 8, 4, 6, 6, 8, 4].map(function (xs, index) { return (_jsx(Grid, { item: true, xs: xs, children: _jsxs(Stack, { spacing: 0.5, children: [_jsx(Skeleton, { variant: \"text\", animation: \"wave\", sx: { height: 16, width: '30%' } }), _jsx(Skeleton, { variant: \"rounded\", animation: \"wave\", sx: { height: 56, width: '100%', borderRadius: 1 } })] }) }, index)); }) }), _jsx(Stack, { pt: 3, width: \"100%\", children: _jsx(Skeleton, { variant: \"rounded\", animation: \"wave\", sx: { height: 40, width: '100%', borderRadius: 1 } }) })] }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Stack, Typography } from '@mui/material';\nimport { useTranslation } from 'react-i18next';\nimport { BrandButton } from './BrandButton';\nexport var PaymnetLinkGenerationSuccess = function (_a) {\n    var onClick = _a.onClick;\n    var t = useTranslation('payment').t;\n    var handleClick = function (e) {\n        e.stopPropagation();\n        onClick();\n    };\n    return (_jsxs(Stack, { sx: { height: '400px', gap: 3, pt: 2, alignItems: 'center', justifyContent: 'center' }, children: [_jsx(Typography, { component: \"h2\", fontSize: \"2rem\", textAlign: \"center\", fontWeight: \"600\", color: \"success.main\", children: t('payment:views.success.title') }), _jsxs(\"div\", { children: [_jsx(Typography, { component: \"p\", sx: { maxWidth: '65ch', textAlign: 'center', mx: 'auto' }, children: t('payment:views.success.reason') }), _jsx(Typography, { component: \"p\", sx: { maxWidth: '65ch', textAlign: 'center', mx: 'auto' }, children: t('payment:views.success.description') })] }), _jsx(BrandButton, { onClick: handleClick, variant: \"contained\", children: t('payment:views.success.back') })] }));\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Box } from '@mui/material';\nvar RenderOption = function (props, option, _a) {\n    var selected = _a.selected;\n    return (_jsx(Box, __assign({ component: \"li\" }, props, { sx: {\n            textAlign: 'left',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'flex-start',\n            width: '100%',\n            p: 1,\n            backgroundColor: selected ? 'background.tags' : '',\n        }, children: _jsxs(Box, { width: \"100%\", children: [_jsx(Box, { component: \"div\", sx: { font: 'medium' }, children: option.label }), _jsx(Box, { component: \"div\", color: \"text.secondary\", sx: { fontSize: '12px' }, children: option.owner })] }) })));\n};\nexport var RenderEmailOption = RenderOption;\nexport var RenderPhoneOption = RenderOption;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { FormControl, FormHelperText } from '@mui/material';\nimport { useMemo } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\nimport { TextInput, TextInputLabel } from '../ui/Form';\nimport { isTestCurrency, VALID_TEST_PAYMENT_AMOUNT } from './helpers/currency';\nimport { createDigitsHandler } from './helpers/input';\nexport var PaymentAmountField = function (_a) {\n    var getError = _a.getError, getTranslationKey = _a.getTranslationKey, isDisabled = _a.isDisabled;\n    var _b = useFormContext(), control = _b.control, watch = _b.watch;\n    var t = useTranslation(['payment', 'validation']).t;\n    var currency = watch('currency');\n    var isReadonly = isTestCurrency(currency);\n    var allowDigitsOnly = useMemo(function () { return createDigitsHandler({ maxDecimal: 2 }); }, []);\n    return (_jsx(Controller, { name: \"amount\", control: control, render: function (_a) {\n            var field = _a.field;\n            var error = getError(field.name);\n            return (_jsxs(FormControl, { fullWidth: true, error: !!error, disabled: isReadonly || isDisabled, children: [_jsx(TextInputLabel, { children: t(getTranslationKey('labels.amount')) }), _jsx(TextInput, __assign({}, field, { onKeyDown: allowDigitsOnly, error: !!error, helperText: t(error), value: isReadonly ? VALID_TEST_PAYMENT_AMOUNT.toFixed(2) : field.value, placeholder: t(getTranslationKey('placeholders.amount')), disabled: isReadonly || isDisabled })), isReadonly && _jsx(FormHelperText, { children: t(getTranslationKey('helperText.testPayment')) })] }));\n        } }));\n};\n","export var createDigitsHandler = function (_a) {\n    var maxDecimal = _a.maxDecimal;\n    return function (event) {\n        var _a;\n        var allowedKeys = ['Backspace', 'ArrowLeft', 'ArrowRight', 'Delete', 'Tab'];\n        if (allowedKeys.includes(event.key))\n            return;\n        var input = event.target;\n        var currentValue = input.value;\n        var key = event.key;\n        var isDigit = /^\\d$/.test(key);\n        var isDotOrComma = key === '.' || key === ',';\n        var separator = currentValue.includes('.') ? '.' : currentValue.includes(',') ? ',' : null;\n        if (isDigit) {\n            if (separator) {\n                var separatorIndex = currentValue.indexOf(separator);\n                var cursorPos = (_a = input.selectionStart) !== null && _a !== void 0 ? _a : 0;\n                // Check if the cursor is after the separator\n                if (cursorPos > separatorIndex) {\n                    var decimals = currentValue.split(separator)[1] || '';\n                    if (decimals.length >= maxDecimal) {\n                        event.preventDefault();\n                        return;\n                    }\n                }\n            }\n            return;\n        }\n        if (isDotOrComma && !separator) {\n            return;\n        }\n        event.preventDefault();\n    };\n};\n","import * as v from 'valibot';\nimport { PaymentCurrencyEnum, RecieptDeliveryEnum } from '../../models/payment';\nvar t = function (key) { return key; };\nvar getKey = function (path) { return \"validation:common.\".concat(path); };\nvar PaymentAccountSchema = v.pipe(v.object({ id: v.union([v.number(), v.string()]), label: v.string() }), v.check(function (input) { return input !== null; }, t(getKey('predefined'))));\nvar EmailSchema = v.union([\n    v.pipe(v.string(t(getKey('invalidString'))), v.trim(), v.nonEmpty(t(getKey('required'))), v.email(t(getKey('invalidEmail')))),\n    v.object({\n        id: v.string(t(getKey('invalidString'))),\n        label: v.string(t(getKey('invalidString'))),\n        owner: v.string(),\n    }),\n], t(getKey('required')));\nvar PhoneSchema = v.union([\n    v.pipe(v.string(t(getKey('invalidString'))), v.trim(), v.nonEmpty(t(getKey('required')))),\n    v.object({\n        id: v.string(t(getKey('invalidString'))),\n        label: v.string(t(getKey('invalidString'))),\n        owner: v.string(),\n    }),\n], t(getKey('required')));\nexport var GeneratePaymentFormSchema = v.object({\n    description: v.pipe(v.string(t(getKey('invalidString'))), v.trim(), v.nonEmpty(t(getKey('required')))),\n    amount: v.pipe(v.string(t(getKey('invalidString'))), v.trim(), v.nonEmpty(t(getKey('required'))), v.check(function (input) { return !isNaN(Number(input)); }, function () { return t(getKey('invalidNumber')); })),\n    currency: v.enum(PaymentCurrencyEnum),\n    email: EmailSchema,\n    phone: PhoneSchema,\n    paymentAccount: PaymentAccountSchema,\n    receiptDelivery: v.enum(RecieptDeliveryEnum),\n});\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { valibotResolver } from '@hookform/resolvers/valibot';\nimport { Box, FormControl, FormHelperText, Grid, MenuItem, Stack } from '@mui/material';\nimport { Suspense, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Controller, FormProvider, useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\nimport { getErrorMessage } from '../../helpers/errors';\nimport { useDeal } from '../../hooks/useDeal';\nimport { useNotification } from '../../hooks/useNotification';\nimport { usePaymentLink } from '../../hooks/usePaymentLink';\nimport { usePaymentSourceData } from '../../hooks/usePaymentSourceData';\nimport { adaptToPaymentLinkDto } from '../../store/reducers/payment/mapper';\nimport { LoadingBrandButton } from '../ui/BrandButton';\nimport { DealNotFoundView } from '../ui/DealNotFoundView';\nimport { Combobox, TextInput, TextInputLabel } from '../ui/Form';\nimport { PaymentAccountsNotFoundView } from '../ui/PaymentAccountsNotFoundView';\nimport { PaymentFormSkeleton } from '../ui/PaymentFormSkeleton';\nimport { PaymnetLinkGenerationSuccess } from '../ui/PaymnetLinkGenerationSuccess';\nimport { RenderEmailOption, RenderPhoneOption } from '../ui/RenderOption';\nimport { getInitialPaymentFormState } from './helpers/formState';\nimport { getCurrencyLabel } from './helpers/labels';\nimport { PaymentAmountField } from './PaymentAmountField';\nimport { GeneratePaymentFormSchema } from './types';\nexport var PaymentFormComponent = function (_a) {\n    var initial = _a.initial, onSubmit = _a.onSubmit, disabled = _a.disabled, _b = _a.loading, loading = _b === void 0 ? false : _b;\n    var form = useForm({ defaultValues: initial, resolver: valibotResolver(GeneratePaymentFormSchema) });\n    var _c = usePaymentSourceData(), accounts = _c.accounts, currencies = _c.currencies, recieptDeliveryTransports = _c.recieptDeliveryTransports, emails = _c.emails, phones = _c.phones;\n    var t = useTranslation(['payment', 'validation']).t;\n    useEffect(function () {\n        if (accounts.length) {\n            form.setValue('paymentAccount', accounts[0]);\n        }\n    }, [accounts]);\n    var isDisabled = form.formState.isSubmitting || disabled;\n    return (_jsx(FormProvider, __assign({}, form, { children: _jsxs(Box, { component: \"form\", sx: { pt: 4, px: 1 }, onSubmit: form.handleSubmit(function (values) {\n                onSubmit(values);\n            }), children: [_jsxs(Grid, { container: true, spacing: 4, children: [_jsx(Grid, { item: true, xs: 12, children: _jsx(Controller, { name: \"description\", control: form.control, render: function (_a) {\n                                    var field = _a.field;\n                                    var error = getError(field.name);\n                                    return (_jsxs(FormControl, { fullWidth: true, error: !!error, disabled: isDisabled, children: [_jsx(TextInputLabel, { children: t(getKey('labels.description')) }), _jsx(TextInput, __assign({}, field, { error: !!error, helperText: t(error), placeholder: t(getKey('placeholders.description')), disabled: isDisabled }))] }));\n                                } }) }), _jsx(Grid, { item: true, xs: 8, children: _jsx(PaymentAmountField, { isDisabled: isDisabled, getError: getError, getTranslationKey: getKey }) }), _jsx(Grid, { item: true, xs: 4, children: _jsx(Controller, { name: \"currency\", control: form.control, render: function (_a) {\n                                    var field = _a.field;\n                                    var error = getError(field.name);\n                                    return (_jsxs(FormControl, { fullWidth: true, error: !!error, disabled: isDisabled, children: [_jsx(TextInputLabel, { children: t(getKey('labels.currency')) }), _jsx(TextInput, __assign({}, field, { select: true, error: !!error, helperText: t(error), id: \"currency\", placeholder: t(getKey('placeholders.currency')), disabled: isDisabled, children: currencies === null || currencies === void 0 ? void 0 : currencies.map(function (currency) {\n                                                    return (_jsx(MenuItem, { value: currency, children: getCurrencyLabel(currency) }, currency));\n                                                }) }))] }));\n                                } }) }), _jsx(Grid, { item: true, xs: 6, children: _jsx(Controller, { name: \"email\", control: form.control, render: function (_a) {\n                                    var field = _a.field;\n                                    var error = getError(field.name);\n                                    return (_jsxs(FormControl, { fullWidth: true, error: !!error, disabled: isDisabled, children: [_jsx(TextInputLabel, { children: t(getKey('labels.email')) }), _jsx(Combobox, __assign({}, field, { freeSolo: true, options: emails, disabled: isDisabled, onInputChange: function (_, data) {\n                                                    field.onChange(data);\n                                                }, onChange: function (_, value) {\n                                                    field.onChange(value);\n                                                }, renderOption: RenderEmailOption, renderInput: function (params) { return (_jsx(TextInput, __assign({}, params, { error: !!error, helperText: t(error), placeholder: t(getKey('placeholders.email')), disabled: isDisabled }))); } }))] }));\n                                } }) }), _jsx(Grid, { item: true, xs: 6, children: _jsx(Controller, { name: \"phone\", control: form.control, render: function (_a) {\n                                    var field = _a.field;\n                                    var error = getError(field.name);\n                                    return (_jsxs(FormControl, { fullWidth: true, error: !!error, disabled: isDisabled, children: [_jsx(TextInputLabel, { children: t(getKey('labels.phone')) }), _jsx(Combobox, __assign({}, field, { freeSolo: true, options: phones, disabled: isDisabled, onInputChange: function (_, data) {\n                                                    field.onChange(data);\n                                                }, onChange: function (_, value) {\n                                                    field.onChange(value);\n                                                }, renderOption: RenderPhoneOption, renderInput: function (params) { return (_jsx(TextInput, __assign({}, params, { error: !!error, helperText: t(error), placeholder: t(getKey('placeholders.phone')), disabled: isDisabled }))); } }))] }));\n                                } }) }), _jsx(Grid, { item: true, xs: 8, children: _jsx(Controller, { name: \"paymentAccount\", control: form.control, render: function (_a) {\n                                    var _b = _a.field, value = _b.value, onChange = _b.onChange, restField = __rest(_b, [\"value\", \"onChange\"]);\n                                    var error = getError(restField.name);\n                                    return (_jsxs(FormControl, { fullWidth: true, error: !!error, disabled: isDisabled, children: [_jsx(TextInputLabel, { children: t(getKey('labels.paymentAccount')) }), _jsx(TextInput, __assign({}, restField, { select: true, value: (value === null || value === void 0 ? void 0 : value.id) || '', onChange: function (e) {\n                                                    var selectedId = e.target.value;\n                                                    var selected = accounts === null || accounts === void 0 ? void 0 : accounts.find(function (account) { return account.id === selectedId; });\n                                                    onChange(selected || null);\n                                                }, error: !!error, helperText: t(error), id: \"currency\", placeholder: t(getKey('placeholders.paymentAccount')), disabled: isDisabled, children: accounts === null || accounts === void 0 ? void 0 : accounts.map(function (account) {\n                                                    return (_jsx(MenuItem, { value: account.id, children: account.label }, account.id));\n                                                }) }))] }));\n                                } }) }), _jsx(Grid, { item: true, xs: 4, children: _jsx(Controller, { name: \"receiptDelivery\", control: form.control, render: function (_a) {\n                                    var field = _a.field;\n                                    var error = getError(field.name);\n                                    return (_jsxs(FormControl, { fullWidth: true, error: !!error, disabled: isDisabled, children: [_jsx(TextInputLabel, { children: t(getKey('labels.receiptDelivery')) }), _jsx(TextInput, __assign({}, field, { select: true, error: !!error, helperText: t(error), placeholder: t(getKey('placeholders.receiptDelivery')), disabled: isDisabled, children: recieptDeliveryTransports === null || recieptDeliveryTransports === void 0 ? void 0 : recieptDeliveryTransports.map(function (transport) {\n                                                    return (_jsx(MenuItem, { value: transport, children: t(getKey(\"predefined.receiptDelivery.\".concat(transport.toLowerCase()))) }, transport));\n                                                }) }))] }));\n                                } }) })] }), _jsx(Stack, { pt: 3, flexDirection: \"row\", justifyContent: \"center\", children: _jsx(LoadingBrandButton, { fullWidth: true, loading: loading, type: \"submit\", variant: \"contained\", disabled: isDisabled, children: t(getKey('submit')) }) })] }) })));\n    function getError(name) {\n        var _a, _b;\n        var errI18nKey = ((_b = (_a = form.formState.errors[name]) === null || _a === void 0 ? void 0 : _a.message) !== null && _b !== void 0 ? _b : '');\n        if (!errI18nKey)\n            return '';\n        return t(errI18nKey);\n    }\n    function getKey(path) {\n        return \"payment:paymentForm.\".concat(path);\n    }\n};\nvar CLEAR_ERRORS_IN = 3000;\nvar PaymentForm = function () {\n    var _a = useState('idle'), view = _a[0], setView = _a[1];\n    var timeoutId = useRef(null);\n    var deal = useDeal().deal;\n    var _b = usePaymentLink(), generateLink = _b.generateLink, isLoading = _b.isLoading, error = _b.error, isSuccess = _b.isSuccess, reset = _b.reset;\n    var _c = usePaymentSourceData(), accounts = _c.accounts, currencies = _c.currencies, isLoadingSourceData = _c.isLoading;\n    var _d = useNotification(), errorNotification = _d.errorNotification, successNotification = _d.successNotification;\n    var initial = useMemo(function () { return getInitialPaymentFormState(deal, currencies); }, [deal, currencies]);\n    var isIdleView = view === 'idle';\n    var isSuccessView = view === 'success';\n    var onGoBack = useCallback(function () { return setView('idle'); }, []);\n    var handleFormSubmit = useCallback(function (values) { return __awaiter(void 0, void 0, void 0, function () {\n        var dto;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    dto = adaptToPaymentLinkDto(values, deal.id);\n                    return [4 /*yield*/, generateLink(dto)];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    }); }, [deal]);\n    useEffect(function () {\n        if (error) {\n            errorNotification(getErrorMessage(error).message);\n            timeoutId.current = setTimeout(function () {\n                reset();\n                timeoutId.current = null;\n            }, CLEAR_ERRORS_IN);\n        }\n    }, [error]);\n    useEffect(function () {\n        if (isSuccess) {\n            successNotification();\n            setView('success');\n        }\n    }, [isSuccess]);\n    useEffect(function () {\n        return function () {\n            if (timeoutId.current !== null) {\n                clearTimeout(timeoutId.current);\n                timeoutId.current = null;\n            }\n        };\n    }, []);\n    if (!deal) {\n        return _jsx(DealNotFoundView, {});\n    }\n    if (isLoadingSourceData) {\n        return _jsx(PaymentFormSkeleton, {});\n    }\n    if (!(accounts === null || accounts === void 0 ? void 0 : accounts.length) && !isLoadingSourceData) {\n        return _jsx(PaymentAccountsNotFoundView, {});\n    }\n    var isLoaded = !isLoadingSourceData && !!(accounts === null || accounts === void 0 ? void 0 : accounts.length);\n    return (_jsx(Suspense, { fallback: _jsx(PaymentFormSkeleton, {}), children: _jsx(_Fragment, { children: isLoaded && (_jsxs(_Fragment, { children: [isIdleView && (_jsxs(Stack, { gap: 2, children: [_jsx(PaymentFormComponent, { onSubmit: handleFormSubmit, initial: initial, disabled: isLoading, loading: isLoading }), !!error && (_jsx(FormHelperText, { error: true, sx: { fontSize: '1rem' }, children: getErrorMessage(error).message }))] })), isSuccessView && _jsx(PaymnetLinkGenerationSuccess, { onClick: onGoBack })] })) }) }));\n};\nexport default PaymentForm;\n","import { isTestCurrency } from './currency';\nexport var getCurrencyLabel = function (option) {\n    return isTestCurrency(option) ? \"\".concat(option, \" (for test account)\") : option;\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { useCallback } from 'react';\nimport { useAppDispatch, useAppSelector } from '../store';\nimport { paymentActions } from '../store/reducers/payment';\nimport { generatePaymentLink as generatePaymentLinkAction } from '../store/reducers/payment/async-thunks';\nimport { selectGenerateError, selectIsGenerating, selectIsGeneratingSuccess } from '../store/reducers/payment/selectors';\nexport var usePaymentLink = function () {\n    var dispatch = useAppDispatch();\n    var isSuccess = useAppSelector(selectIsGeneratingSuccess);\n    var isLoading = useAppSelector(selectIsGenerating);\n    var error = useAppSelector(selectGenerateError);\n    var isError = !!error;\n    var generateLink = function (dto) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, dispatch(generatePaymentLinkAction(dto))];\n        });\n    }); };\n    var reset = useCallback(function () {\n        dispatch(paymentActions.resetGeneratingRequest());\n    }, []);\n    return {\n        generateLink: generateLink,\n        isLoading: isLoading,\n        error: error,\n        isError: isError,\n        isSuccess: isSuccess,\n        reset: reset,\n    };\n};\n","import { isDev, isStage } from '../../../const';\nimport { PaymentCurrencyEnum, RecieptDeliveryEnum } from '../../../models/payment';\nexport var getInitialPaymentFormState = function (deal, currencies) {\n    var _a, _b, _c, _d, _e;\n    var contact = ((deal === null || deal === void 0 ? void 0 : deal.contacts) || [])[0];\n    var fallbackEmail = ((_a = contact === null || contact === void 0 ? void 0 : contact.email) !== null && _a !== void 0 ? _a : [])[0];\n    var email = ((_b = contact === null || contact === void 0 ? void 0 : contact.email) === null || _b === void 0 ? void 0 : _b.find(function (emailAddress) { return !!emailAddress.main; })) || fallbackEmail;\n    var currency = isDev || isStage ? PaymentCurrencyEnum.XTS : currencies.find(function (c) { var _a; return c === ((_a = deal === null || deal === void 0 ? void 0 : deal.amount) === null || _a === void 0 ? void 0 : _a.currency); }) || PaymentCurrencyEnum.UAH;\n    var amount = ((_c = deal === null || deal === void 0 ? void 0 : deal.amount) === null || _c === void 0 ? void 0 : _c.value) || '0.00';\n    return {\n        amount: amount,\n        currency: currency,\n        description: '',\n        email: (_d = email === null || email === void 0 ? void 0 : email.value) !== null && _d !== void 0 ? _d : '',\n        paymentAccount: null,\n        phone: (_e = contact === null || contact === void 0 ? void 0 : contact.phone) !== null && _e !== void 0 ? _e : '',\n        receiptDelivery: RecieptDeliveryEnum.None,\n    };\n};\n"],"names":["selectDeal","state","deal","app","amount","contacts","id","useDeal","dispatch","useDispatch","useSelector","hydrateDeal","entity","clearDeal","AppProvider","_a","children","_b","useEffect","_jsx","_Fragment","usePaymentSourceData","usePaymentAccountsList","data","isLoading","isError","error","refetch","currencies","testCurrency","PaymentCurrencyEnum","XTS","isDev","isStage","to","from","pack","arguments","length","ar","i","l","Array","prototype","slice","call","concat","__spreadArray","getCurrencyList","emails","useMemo","map","contact","email","_c","value","label","owner","title","flat","filter","phones","phone","accounts","recieptDeliveryTransports","refetchAccounts","DealNotFoundView","t","useTranslation","Stack","sx","height","alignItems","justifyContent","gap","px","Typography","variant","PaymentAccountsNotFoundView","_jsxs","maxWidth","textAlign","PaymentFormSkeleton","pt","Grid","container","spacing","xs","index","item","Skeleton","animation","width","borderRadius","PaymnetLinkGenerationSuccess","onClick","component","fontSize","fontWeight","color","mx","BrandButton","e","stopPropagation","__assign","Object","assign","s","n","p","hasOwnProperty","apply","this","RenderOption","props","option","selected","Box","display","flexDirection","backgroundColor","font","RenderEmailOption","RenderPhoneOption","PaymentAmountField","getError","getTranslationKey","isDisabled","useFormContext","control","watch","currency","isReadonly","isTestCurrency","allowDigitsOnly","event","includes","key","input","target","currentValue","isDigit","test","isDotOrComma","separator","separatorIndex","indexOf","selectionStart","split","preventDefault","Controller","name","render","field","FormControl","fullWidth","disabled","TextInputLabel","TextInput","onKeyDown","helperText","VALID_TEST_PAYMENT_AMOUNT","toFixed","placeholder","FormHelperText","getKey","path","PaymentAccountSchema","v","EmailSchema","PhoneSchema","GeneratePaymentFormSchema","description","isNaN","Number","paymentAccount","receiptDelivery","RecieptDeliveryEnum","PaymentFormComponent","initial","onSubmit","loading","form","useForm","defaultValues","resolver","valibotResolver","setValue","formState","isSubmitting","FormProvider","handleSubmit","values","select","MenuItem","Combobox","freeSolo","options","onInputChange","_","onChange","renderOption","renderInput","params","restField","getOwnPropertySymbols","propertyIsEnumerable","__rest","selectedId","find","account","transport","toLowerCase","LoadingBrandButton","type","errI18nKey","errors","message","useState","view","setView","timeoutId","useRef","useAppDispatch","isSuccess","useAppSelector","selectIsGeneratingSuccess","selectIsGenerating","selectGenerateError","generateLink","dto","thisArg","_arguments","generator","body","f","y","sent","trys","ops","g","create","Iterator","next","verb","Symbol","iterator","op","TypeError","done","pop","push","step","__generator","generatePaymentLinkAction","P","Promise","resolve","reject","fulfilled","rejected","result","then","reset","useCallback","paymentActions","resetGeneratingRequest","usePaymentLink","isLoadingSourceData","_d","useNotification","errorNotification","successNotification","_e","fallbackEmail","emailAddress","main","c","UAH","None","getInitialPaymentFormState","isIdleView","isSuccessView","onGoBack","handleFormSubmit","adaptToPaymentLinkDto","getErrorMessage","current","setTimeout","clearTimeout","isLoaded","Suspense","fallback"],"sourceRoot":""}