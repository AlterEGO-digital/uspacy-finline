(self.webpackChunkcontainer=self.webpackChunkcontainer||[]).push([[1952],{771:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MainRoles=void 0,function(e){e.ADMIN="ADMIN",e.OWNER="OWNER"}(i||(t.MainRoles=i={}))},1837:(e,t,i)=>{(()=>{"use strict";var t={7685:function(e,t,i){var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(r,n){function s(e){try{l(a.next(e))}catch(e){n(e)}}function d(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,d)}l((a=a.apply(e,t||[])).next())})},r=this&&this.__rest||function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(i[a[r]]=e[a[r]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteReason=t.updateReason=t.createReason=t.deleteStage=t.updateStage=t.createStage=t.deleteFunnel=t.updateFunnel=t.createFunnel=t.fetchStages=t.fetchFunnels=void 0;const n=i(5184),s=i(4809);t.fetchFunnels=(0,n.createAsyncThunk)("crm/funnels/fetchFunnels",(e,t)=>a(void 0,void 0,void 0,function*(){try{const t=yield s.uspacySdk.crmEntitiesService.getEntityFunnel(e);return null==t?void 0:t.data}catch(e){return t.rejectWithValue("Failure")}})),t.fetchStages=(0,n.createAsyncThunk)("crm/stage/fetchStages",({entityCode:e,funnelId:t},i)=>a(void 0,void 0,void 0,function*(){try{const i=yield s.uspacySdk.crmEntitiesService.getEntityStages(e,t);return null==i?void 0:i.data}catch(e){return i.rejectWithValue("Failure")}})),t.createFunnel=(0,n.createAsyncThunk)("crm/funnels/createFunnel",({data:e,entityCode:t},i)=>a(void 0,void 0,void 0,function*(){try{const i=yield s.uspacySdk.crmEntitiesService.createEntityFunnel(t,e);return null==i?void 0:i.data}catch(e){return i.rejectWithValue("Failure")}})),t.updateFunnel=(0,n.createAsyncThunk)("crm/funnels/updateFunnel",({data:e,entityCode:t},i)=>a(void 0,void 0,void 0,function*(){const{id:a}=e,n=r(e,["id"]);try{const e=yield s.uspacySdk.crmEntitiesService.updateEntityFunnel(t,a,n);return null==e?void 0:e.data}catch(e){return i.rejectWithValue("Failure")}})),t.deleteFunnel=(0,n.createAsyncThunk)("crm/funnels/deleteFunnel",({id:e,entityCode:t},i)=>a(void 0,void 0,void 0,function*(){try{return yield s.uspacySdk.crmEntitiesService.deleteEntityFunnel(t,e)}catch(e){return i.rejectWithValue(e)}})),t.createStage=(0,n.createAsyncThunk)("crm/funnels/createStage",({data:e,entityCode:t},i)=>a(void 0,void 0,void 0,function*(){try{const i=yield s.uspacySdk.crmEntitiesService.createEntityStage(t,e);return null==i?void 0:i.data}catch(e){return i.rejectWithValue("Failure")}})),t.updateStage=(0,n.createAsyncThunk)("crm/funnels/updateStage",({data:e,entityCode:t},i)=>a(void 0,void 0,void 0,function*(){try{const i=yield s.uspacySdk.crmEntitiesService.updateEntityStage(t,e.id,e);return null==i?void 0:i.data}catch(e){return i.rejectWithValue("Failure")}})),t.deleteStage=(0,n.createAsyncThunk)("crm/funnels/deleteStage",({id:e,entityCode:t},i)=>a(void 0,void 0,void 0,function*(){try{return yield s.uspacySdk.crmEntitiesService.deleteEntityStage(t,e)}catch(e){return i.rejectWithValue(e)}})),t.createReason=(0,n.createAsyncThunk)("crm/funnels/createReason",({data:e},t)=>a(void 0,void 0,void 0,function*(){try{return(yield s.uspacySdk.crmEntitiesService.createEntityReason(e.funnelId,e)).data}catch(e){return t.rejectWithValue("Failure")}})),t.updateReason=(0,n.createAsyncThunk)("crm/funnels/editReason",({data:e},t)=>a(void 0,void 0,void 0,function*(){try{const t=yield s.uspacySdk.crmEntitiesService.updateEntityReason(e.id,e);return null==t?void 0:t.data}catch(e){return t.rejectWithValue("Failure")}})),t.deleteReason=(0,n.createAsyncThunk)("crm/funnels/deleteReason",({id:e},t)=>a(void 0,void 0,void 0,function*(){try{return yield s.uspacySdk.crmEntitiesService.deleteEntityReason(e)}catch(e){return t.rejectWithValue(e)}}))},5184:e=>{e.exports=i(9613)},4809:e=>{e.exports=i(2396)}},a={},r=function e(i){var r=a[i];if(void 0!==r)return r.exports;var n=a[i]={exports:{}};return t[i].call(n.exports,n,n.exports,e),n.exports}(7685);e.exports=r})()},3817:(e,t,i)=>{(()=>{"use strict";var t={3970:(e,t)=>{var i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.fieldsForTasks=t.fieldForCalls=t.staticEntities=t.AVAILABLE_ENTITY_TYPES=t.unreadMessagesValue=t.FieldType=t.defaultProductFieldKeys=t.EntityIds=t.OTHER_DEFAULT_FIELDS=t.headField=t.requisiteField=t.taskField=t.dealsField=t.stageField=t.idColumnField=t.idColumn=t.TWO_WEEK_TIME_VALUE=t.API_PREFIX_SETTINGS=t.API_PREFIX_FILES=void 0,t.API_PREFIX_FILES="/files/v1",t.API_PREFIX_SETTINGS="/settings/v1",t.TWO_WEEK_TIME_VALUE=1123200,t.idColumn={name:"number_",code:"id_column",required:!1,editable:!1,show:!1,hidden:!0,multiple:!1,type:"id_column",system_field:!0,sort:"",default_value:""},t.idColumnField=Object.assign({},t.idColumn),t.stageField={name:"stage",code:"kanban_stage_id",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"stage",sort:"",default_value:"",system_field:!1},t.dealsField={name:"deals",code:"deals",required:!1,editable:!1,show:!1,hidden:!0,multiple:!1,type:"deals_filter",system_field:!0,sort:"",default_value:""},t.taskField={name:"tasks",code:"tasks",required:!1,editable:!1,show:!1,hidden:!0,multiple:!1,type:"tasks_filter",system_field:!0,sort:"",default_value:""},t.requisiteField={name:"requisite",code:"requisites",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"requisite",system_field:!0,base_field:!0,sort:""},t.headField={name:"head",code:"head",required:!1,editable:!1,show:!1,hidden:!0,multiple:!1,type:"user_id",system_field:!0,sort:"",default_value:""},t.OTHER_DEFAULT_FIELDS={openDatePicker:!1,search:"",page:0,perPage:0,boolean_operator:"AND",table_fields:[],sortModel:[]},function(e){e.leads="1",e.deals="2",e.contacts="3",e.companies="4"}(i||(t.EntityIds=i={})),t.defaultProductFieldKeys=["owner","id","title","product_category_id","type","article","prices","measurement_unit_id","comment","currency","tax","link","availability","is_active","description","quantity","reserved_quantity","remainder","preview_image_id","file_ids","files"],function(e){e.STAGE="stage",e.STRING="string",e.TEXTAREA="textarea",e.INTEGER="integer",e.FLOAT="float",e.LIST="list",e.DATETIME="datetime",e.MONEY="money",e.LABEL="label",e.PHONE="phone",e.EMAIL="email",e.SOCIAL="social",e.LINK="link",e.BOOLEAN="boolean",e.USER_ID="user_id",e.PHOTO="photo",e.FILE="file",e.ADDRESS="address",e.LEGAL_DETAILS="legal_details",e.ENTITY_REFERENCE="entity_reference",e.UTM="utm",e.CUSTOM_LINK="customLink",e.DEALS_FILTER="deals_filter",e.TASKS_FILTER="tasks_filter",e.ID_COLUMN="id_column",e.REQUISITE="requisite",e.PRIORITY="priority"}(a||(t.FieldType=a={})),t.unreadMessagesValue="unreadMessages",t.AVAILABLE_ENTITY_TYPES=["tasks","comment","crm","company","contact","deal","lead","post","task","companies","contacts","deals","leads"],t.staticEntities=[{id:10001,title:"Calls",table_name:"calls",type:"calls",sort:10,title_singular:null,kanban:!1,for_all_users:!0,display_in_menu:!0,activity_support:!0,task_support:!0,created_by:null,changed_by:null,created_at:Math.floor(Date.now()/1e3),updated_at:Math.floor(Date.now()/1e3)},{id:10002,title:"Products",table_name:"products",type:"products",sort:10,title_singular:null,kanban:!1,for_all_users:!0,display_in_menu:!0,activity_support:!0,task_support:!0,created_by:null,changed_by:null,created_at:Math.floor(Date.now()/1e3),updated_at:Math.floor(Date.now()/1e3)},{id:10003,title:"Tasks",table_name:"tasks",type:"tasks",sort:10,title_singular:null,kanban:!1,for_all_users:!0,display_in_menu:!0,activity_support:!0,task_support:!0,created_by:null,changed_by:null,created_at:Math.floor(Date.now()/1e3),updated_at:Math.floor(Date.now()/1e3)},{id:10004,title:"Tasks",table_name:"activities",type:"activities",sort:10,title_singular:null,kanban:!1,for_all_users:!0,display_in_menu:!0,activity_support:!0,task_support:!0,created_by:null,changed_by:null,created_at:Math.floor(Date.now()/1e3),updated_at:Math.floor(Date.now()/1e3)}],t.fieldForCalls=[t.idColumn,{name:"callType",code:"call_type",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"call_type",sort:"",system_field:!1,default_value:"",values:[{color:"",selected:!1,sort:0,title:"outgoing",value:"outgoing"},{color:"",selected:!1,sort:0,title:"incoming",value:"incoming"}]},{name:"callStatus",code:"ended_call_status",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"call_status",sort:"",system_field:!1,default_value:""},{name:"date",code:"begin_time",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"call_date",sort:"",system_field:!1,default_value:""},{name:"clientPhone",code:"client_phone",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"call_phone",sort:"",system_field:!1,default_value:""},{name:"responsibleId",code:"responsible_id",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"user_id",sort:"",system_field:!1,default_value:""},{name:"record",code:"record",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"call_record",sort:"",system_field:!1,default_value:""},{name:"baseCRMEntity",code:"base_entity",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"call_entity_reference",sort:"",system_field:!1,default_value:""},{name:"duration",code:"duration",required:!1,editable:!1,show:!0,hidden:!0,multiple:!1,type:"call_duration",sort:"",system_field:!1,default_value:""}],t.fieldsForTasks=[{name:"caseType",code:"type",required:!1,editable:!1,show:!1,hidden:!0,multiple:!1,type:"list",system_field:!0,sort:"",default_value:"",values:[{color:"",selected:!1,sort:0,title:"task",value:"task"},{color:"",selected:!1,sort:0,title:"call",value:"call"},{color:"",selected:!1,sort:0,title:"meeting",value:"meeting"},{color:"",selected:!1,sort:0,title:"chat",value:"chat"},{color:"",selected:!1,sort:0,title:"message",value:"email"}]},{name:"taskTitle",code:"title",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"string",sort:"",system_field:!1,default_value:""},{name:"eventStartDate",code:"start_time",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"dateCheap",sort:"",system_field:!1,default_value:""},{name:"eventEndDate",code:"end_time",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"dateCheap",sort:"",system_field:!1,default_value:""},{name:"status",code:"status",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"status",sort:"",system_field:!1,default_value:""},{name:"priority",code:"priority",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"priority",sort:"",system_field:!1,default_value:""},{name:"responsibleId",code:"responsible_id",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"user_id",sort:"",system_field:!1,default_value:""},{name:"leadOrAgreement",code:"leadOrDeal",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"customLink",sort:"",system_field:!1,default_value:""},{name:"contacts",code:"contacts",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"customLink",sort:"",system_field:!1,default_value:""},{name:"company",code:"company",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"customLink",sort:"",system_field:!1,default_value:""},{name:"dateOfCompletion",code:"closed_at",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"dateCheap",sort:"",system_field:!1,default_value:""},{name:"created_at",code:"created_at",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"dateCheap",sort:"",system_field:!1,default_value:""},{name:"dateOfUpdate",code:"updated_at",required:!1,editable:!1,show:!0,hidden:!1,multiple:!1,type:"dateCheap",sort:"",system_field:!1,default_value:""},{name:"participants",code:"participants",required:!1,editable:!1,show:!0,hidden:!1,multiple:!0,type:"user_id",system_field:!1,sort:"",default_value:""}]},9860:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDealsParams=t.getFilterParams=t.getField=t.updateFieldsInPresets=t.getFilterField=t.getDefaultFastFields=void 0;const r=a(i(5599)),n=a(i(8524)),s=a(i(7078)),d=a(i(7026)),l=i(3970);t.getDefaultFastFields=e=>{switch(e){case"lead":return["kanban_status","kanban_stage_id","source","created_at","owner"];case"deal":return["kanban_status","kanban_stage_id","tasks","created_at","owner"];case"company":return["company_label","source","created_at","owner","updated_at"];case"contact":return["contact_label","source","created_at","owner","updated_at"];case"task":case"product":return["kanban_status","kanban_stage_id","source","created_at","owner","contact_label","deals","company_label"];case"calls":return["ended_call_status","call_type","duration","responsible_id","begin_time"];default:return["created_at","updated_at","owner","created_by","changed_by","created_at_custom","updated_at_custom"]}},t.getFilterField=(e,i)=>{var a,r,n,s,d;const l=["lead","deal","contact","product","company","task"];if(!(null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.length))return[];const u=[],c=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.find(e=>l.includes(i)?e.code===(0,t.getDefaultFastFields)(i)[0]:e.code.includes((0,t.getDefaultFastFields)(i)[0])),o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.find(e=>l.includes(i)?e.code===(0,t.getDefaultFastFields)(i)[1]:e.code.includes((0,t.getDefaultFastFields)(i)[1])),p=null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.find(e=>e.code===(0,t.getDefaultFastFields)(i)[2]),v=null===(d=null==e?void 0:e.data)||void 0===d?void 0:d.find(e=>e.code===(0,t.getDefaultFastFields)(i)[3]),y=null==e?void 0:e.data.find(e=>e.code===(0,t.getDefaultFastFields)(i)[4]);return(null==c?void 0:c.code)&&u.push(c),(null==o?void 0:o.code)&&u.push(o),(null==p?void 0:p.code)&&u.push(p),(null==v?void 0:v.code)&&u.push(v),(null==y?void 0:y.code)&&u.push(y),[...u,...e.data.filter(e=>!(0,t.getDefaultFastFields)(i).includes(e.code))].map((e,a)=>({id:a,title:e.name,code:e.code,sort:10*(a+1),checked:(0,t.getDefaultFastFields)(i).includes(e.code),fast:(0,t.getDefaultFastFields)(i).includes(e.code)}))},t.updateFieldsInPresets=(e,t)=>{const i=e.filter(e=>[...null==t?void 0:t.data.map(e=>e.code),"select","search"].includes(e.code)).map(e=>Object.assign({},e));return t.data.forEach((e,t)=>{i.some(t=>t.code===e.code)||i.push({id:t+1,title:e.name,code:e.code,sort:10*(i.length+1),checked:!1,fast:!1})}),i},t.getField=e=>[l.FieldType.DATETIME,l.FieldType.TASKS_FILTER].includes(e.type)?{[`certainDateOrPeriod_${null==e?void 0:e.code}`]:[],[`time_label_${null==e?void 0:e.code}`]:[],[`${null==e?void 0:e.code}`]:[]}:[l.FieldType.INTEGER,l.FieldType.FLOAT].includes(e.type)?"kanban_reason_id"===e.code?{[`${null==e?void 0:e.code}`]:[]}:{[`to_${null==e?void 0:e.code}`]:null,[`from_${null==e?void 0:e.code}`]:null}:e.type===l.FieldType.MONEY?{[`to_${null==e?void 0:e.code}`]:null,[`from_${null==e?void 0:e.code}`]:null,[`currency_${null==e?void 0:e.code}`]:""}:[l.FieldType.TEXTAREA,l.FieldType.UTM,l.FieldType.ADDRESS,l.FieldType.PHONE,l.FieldType.LINK,l.FieldType.SOCIAL,l.FieldType.EMAIL,l.FieldType.STRING,l.FieldType.FLOAT,l.FieldType.INTEGER].includes(e.type)?"kanban_status"===(null==e?void 0:e.code)?{[`${null==e?void 0:e.code}`]:[]}:{[`${null==e?void 0:e.code}`]:""}:{[`${null==e?void 0:e.code}`]:[]},t.getFilterParams=(e,t,i=!1)=>{var a;return null===(a=null==Object?void 0:Object.entries(e))||void 0===a?void 0:a.filter(([e,t])=>!(("time_label_start_time"!==e||!t.includes("expiredtask"))&&((null==e?void 0:e.includes("certainDateOrPeriod_"))||(null==e?void 0:e.includes("time_label_"))||(null==e?void 0:e.includes("openDatePicker"))||(null==e?void 0:e.includes("View"))||(null==e?void 0:e.includes("entityCode"))||i&&["select","page","perPage","table_fields","entityCode","sortModel"].includes(e)||!((null==e?void 0:e.includes("select"))?t>0:(0,r.default)(t)?(null==t?void 0:t.length)>0:(0,d.default)(t)?t:!(0,s.default)(t)||!isNaN(t))))).reduce((e,[i,a])=>{const s=null==t?void 0:t.find(e=>(null==e?void 0:e.code)===i);if("search"===i)return Object.assign(Object.assign({},e),{q:a});if("perPage"===i)return Object.assign(Object.assign({},e),{list:a});if("time_label_start_time"===i&&(null==a?void 0:a.includes("expiredtask")))return Object.assign(Object.assign({},e),{expired:Math.floor((new Date).getTime()/1e3)});if("select"===i)return Object.assign(Object.assign({},e),{funnel_id:a});if("deals"===i&&"customLink"!==(null==s?void 0:s.type))return Object.assign(Object.assign({},e),{deals:null==a?void 0:a.filter(e=>"NO_DEALS"!==e)});if("customLink"===(null==s?void 0:s.type)){const t="company"===i?"companies":i;return Object.assign(Object.assign({},e),{[`${t}[title]`]:a})}if(["kanban_status","kanban_reason_id"].includes(i))return Object.assign(Object.assign({},e),{[i]:(0,r.default)(a)?a:[a]});if(["tasks"].includes(i))return Object.assign(Object.assign({},e),{[i]:null==a?void 0:a.filter(e=>0!==e)});if(["owner"].includes(i))return Object.assign(Object.assign({},e),{[i]:0==a?null:null==a?void 0:a.filter(e=>0!==e)});if(["sortModel"].includes(i)){const t=(0,r.default)(a)?a:[a];if(0===t.length)return e;const[i,n]=null==Object?void 0:Object.entries(t[0])[0],s="id_column"===i?"id":i;return Object.assign(Object.assign({},e),{[`sort_by[${s}]`]:n})}if((null==i?void 0:i.startsWith("from_"))||(null==i?void 0:i.startsWith("to_"))||(null==i?void 0:i.startsWith("currency_"))||(null==i?void 0:i.startsWith("by_"))){const t=i.replace(/^(from_|to_|currency_|by_)/,""),r=i.split("_")[0];return(0,n.default)(a)||"by"===r?e:Object.assign(Object.assign({},e),{[`${t}[${r}]`]:a})}return[l.FieldType.SOCIAL].includes(null==s?void 0:s.type)&&((null==a?void 0:a.startsWith("@"))||(null==a?void 0:a.startsWith("+")))?Object.assign(Object.assign({},e),{[i]:a.substring(1)}):[l.FieldType.STAGE,l.FieldType.LIST,l.FieldType.LABEL,l.FieldType.PRIORITY].includes(null==s?void 0:s.type)?Object.assign(Object.assign({},e),{[i]:(0,r.default)(a)?a:[a]}):Object.assign(Object.assign({},e),{[i]:a})},{})},t.getDealsParams=(e,t)=>{const i=(Array.isArray(null==e?void 0:e.time_label_tasks)?null==e?void 0:e.time_label_tasks:[e.time_label_task]).filter(Boolean),a=void 0!==(null==e?void 0:e.time_label_tasks)&&(null==i?void 0:i.includes("noBusiness"));return Object.assign(Object.assign({},t),a?{tasks:""}:{})}},641:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useMemoizedAppSelector=t.useAppSelector=t.useAppDispatch=void 0;const r=a(i(113)),n=i(6689),s=i(6022);t.useAppDispatch=()=>(0,s.useDispatch)(),t.useAppSelector=s.useSelector,t.useMemoizedAppSelector=e=>{const i=(0,n.useRef)(null);return(0,t.useAppSelector)(t=>{const a=e(t);return(0,r.default)(i.current,a)?i.current:(i.current=a,a)})}},9790:function(e,t,i){var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(r,n){function s(e){try{l(a.next(e))}catch(e){n(e)}}function d(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,d)}l((a=a.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.removeUsersFromDepartment=t.addUsersToDepartment=t.deleteDepartment=t.editDepartment=t.createDepartment=t.fetchDepartments=void 0;const r=i(5184),n=i(4809),s=i(8065);t.fetchDepartments=(0,r.createAsyncThunk)("departments/fetchDepartments",(e,t)=>a(void 0,void 0,void 0,function*(){try{const e=(yield n.uspacySdk.tokensService.getUserRoles().catch(()=>{}))||[],t=n.uspacySdk.usersService.hasRole(e,[s.MainRoles.ADMIN,s.MainRoles.OWNER])?"all":void 0;return(yield n.uspacySdk.departmentsService.getDepartments(void 0,"all",t)).data}catch(e){return t.rejectWithValue("Failure")}})),t.createDepartment=(0,r.createAsyncThunk)("departments/createDepartment",({name:e,headId:t,description:i,usersIds:r,parentDepartmentId:s,generalDepartmentId:d},l)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.departmentsService.createDepartment({name:e,headId:t,description:i,usersIds:r,parentDepartmentId:s||d.toString()})).data}catch(e){return l.rejectWithValue("Failure")}})),t.editDepartment=(0,r.createAsyncThunk)("departments/editDepartment",({id:e,name:t,headId:i,description:r,usersIds:s,parentDepartmentId:d},l)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.departmentsService.updateDepartment(e,{name:t,headId:i,description:r,parentDepartmentId:d,usersIds:s})).data}catch(e){return l.rejectWithValue("Failure")}})),t.deleteDepartment=(0,r.createAsyncThunk)("departments/deleteDepartment",(e,t)=>a(void 0,void 0,void 0,function*(){try{return n.uspacySdk.departmentsService.deleteDepartment(e)}catch(e){return t.rejectWithValue("Failure")}finally{return e}})),t.addUsersToDepartment=(0,r.createAsyncThunk)("departments/addUsersToDepartment",({departmentId:e,usersIds:t},i)=>a(void 0,void 0,void 0,function*(){try{return n.uspacySdk.departmentsService.addUsersToDepartment(String(e),t)}catch(e){return i.rejectWithValue("Failure")}})),t.removeUsersFromDepartment=(0,r.createAsyncThunk)("departments/removeUsersFromDepartment",({departmentId:e,usersIds:t},i)=>a(void 0,void 0,void 0,function*(){try{return n.uspacySdk.departmentsService.deleteUsersFromDepartment(String(e),t)}catch(e){return i.rejectWithValue("Failure")}}))},995:function(e,t,i){var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(r,n){function s(e){try{l(a.next(e))}catch(e){n(e)}}function d(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,d)}l((a=a.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteProfileField=t.deleteProfileListValues=t.createProfileField=t.updateProfileListValues=t.updateProfileField=t.fetchProfileFields=t.removeTemplate=t.updateTemplate=t.createTemplate=t.fetchBasicTemplates=t.fetchTemplates=t.removeRequisite=t.updateRequisite=t.fetchRequisites=t.fetchProfile=void 0;const r=i(5184),n=i(4809);t.fetchProfile=(0,r.createAsyncThunk)("profile/fetchProfile",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.profileService.getProfile()).data}catch(e){return t.rejectWithValue(e)}})),t.fetchRequisites=(0,r.createAsyncThunk)("crm/fetchRequisites",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.profileService.getRequisites()).data}catch(e){return t.rejectWithValue(e)}})),t.updateRequisite=(0,r.createAsyncThunk)("crm/updateRequisite",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.profileService.updateRequisite(e)).data}catch(e){return t.rejectWithValue(e)}})),t.removeRequisite=(0,r.createAsyncThunk)("crm/removeRequisite",(e,t)=>a(void 0,void 0,void 0,function*(){try{return yield n.uspacySdk.profileService.removeRequisite(e),e}catch(e){return t.rejectWithValue(e)}})),t.fetchTemplates=(0,r.createAsyncThunk)("crm/fetchTemplates",(e,t)=>a(void 0,void 0,void 0,function*(){const{page:i,list:a}=e;try{return(yield n.uspacySdk.profileService.getTemplates(i,a)).data}catch(e){return t.rejectWithValue(e)}})),t.fetchBasicTemplates=(0,r.createAsyncThunk)("crm/fetchBasicTemplates",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.profileService.getBasicTemplates()).data}catch(e){return t.rejectWithValue(e)}})),t.createTemplate=(0,r.createAsyncThunk)("crm/createTemplate",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.profileService.createTemplate(e)).data}catch(e){return t.rejectWithValue(e)}})),t.updateTemplate=(0,r.createAsyncThunk)("crm/updateTemplate",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.profileService.updateTemplate(e)).data}catch(e){return t.rejectWithValue(e)}})),t.removeTemplate=(0,r.createAsyncThunk)("crm/removeTemplate",(e,t)=>a(void 0,void 0,void 0,function*(){try{return yield n.uspacySdk.profileService.removeTemplate(e),e}catch(e){return t.rejectWithValue(e)}})),t.fetchProfileFields=(0,r.createAsyncThunk)("profile/fetchProfileFields",(e,t)=>a(void 0,void 0,void 0,function*(){try{const e=yield n.uspacySdk.profileService.getProfileFields();return null==e?void 0:e.data}catch(e){return t.rejectWithValue(e)}})),t.updateProfileField=(0,r.createAsyncThunk)("profile/updateProfileField",(e,t)=>a(void 0,void 0,void 0,function*(){try{const t=yield n.uspacySdk.profileService.updateProfileField(e.code,e);return null==t?void 0:t.data}catch(e){return t.rejectWithValue(e)}})),t.updateProfileListValues=(0,r.createAsyncThunk)("profile/updateProfileListValues",(e,t)=>a(void 0,void 0,void 0,function*(){try{const t=yield n.uspacySdk.profileService.updateProfileListValues(e);return Object.assign(Object.assign({},e),{values:null==t?void 0:t.data})}catch(e){return t.rejectWithValue(e)}})),t.createProfileField=(0,r.createAsyncThunk)("profile/createProfileField",(e,t)=>a(void 0,void 0,void 0,function*(){try{const t=yield n.uspacySdk.profileService.createProfileField(e);return null==t?void 0:t.data}catch(e){return t.rejectWithValue(e)}})),t.deleteProfileListValues=(0,r.createAsyncThunk)("contacts/deleteProfileListValues",({fieldCode:e,value:t},i)=>a(void 0,void 0,void 0,function*(){try{return yield n.uspacySdk.profileService.deleteProfileListValues(e,t),{value:t,fieldCode:e}}catch(e){return i.rejectWithValue(e)}})),t.deleteProfileField=(0,r.createAsyncThunk)("profile/deleteProfileField",(e,t)=>a(void 0,void 0,void 0,function*(){try{return yield n.uspacySdk.profileService.deleteProfileField(e),e}catch(e){return t.rejectWithValue(e)}}))},8508:function(e,t,i){var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(r,n){function s(e){try{l(a.next(e))}catch(e){n(e)}}function d(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,d)}l((a=a.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchUsersByFilters=t.uploadAvatar=t.deleteInvitation=t.repeatInvitation=t.sendUserInvites=t.activateUser=t.deactivateUser=t.updateUserRoles=t.updateUserPosition=t.updateUser=t.fetchUsers=void 0;const r=i(5184),n=i(4809),s=i(8065),d=i(9860);t.fetchUsers=(0,r.createAsyncThunk)("users/fetchUsers",(e,t)=>a(void 0,void 0,void 0,function*(){try{const e=(yield n.uspacySdk.tokensService.getUserRoles().catch(()=>{}))||[],t=n.uspacySdk.usersService.hasRole(e,[s.MainRoles.ADMIN,s.MainRoles.OWNER])?"all":void 0;return(yield n.uspacySdk.usersService.getUsers(void 0,"all",t)).data}catch(e){return t.rejectWithValue("Failure load users")}})),t.updateUser=(0,r.createAsyncThunk)("users/updateUser",(e,t)=>a(void 0,void 0,void 0,function*(){try{const t=yield n.uspacySdk.usersService.updateUser(e.id,e);return e.active||e.registered||(t.data.dateOfInvitation=e.dateOfInvitation),t.data}catch(e){return t.rejectWithValue("Failure")}})),t.updateUserPosition=(0,r.createAsyncThunk)("users/updateUserPosition",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.usersService.updatePosition(e.id,e.position)).data}catch(e){return t.rejectWithValue("Failure")}})),t.updateUserRoles=(0,r.createAsyncThunk)("users/updateUserRoles",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.usersService.updateRoles(e.id,e.roles)).data}catch(e){return t.rejectWithValue("Failure")}})),t.deactivateUser=(0,r.createAsyncThunk)("users/deactivateUser",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.usersService.deactivateUser(e)).data}catch(e){return t.rejectWithValue("Failure")}})),t.activateUser=(0,r.createAsyncThunk)("users/activateUser",(e,t)=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.usersService.activateUser(e)).data}catch(e){return t.rejectWithValue("Failure")}})),t.sendUserInvites=(0,r.createAsyncThunk)("users/sendUserInvites",({invites:e,type:i},r)=>a(void 0,void 0,void 0,function*(){try{return"single"===i?n.uspacySdk.invatesService.createInvates(e.reduce((e,t)=>t.email.length>0?[...e,{email:t.email,firstName:t.firstName,lastName:t.lastName}]:e,[])):n.uspacySdk.invatesService.createInvatesBatch(e.reduce((e,t)=>t.email.length>0?[...e,t.email]:e,[]))}catch(e){return r.rejectWithValue("Failure")}finally{return r.dispatch((0,t.fetchUsers)())}})),t.repeatInvitation=(0,r.createAsyncThunk)("users/repeatInvitation",(e,t)=>a(void 0,void 0,void 0,function*(){try{return yield n.uspacySdk.invatesService.resendInvateByUserId(e),e}catch(e){return t.rejectWithValue("Failure")}})),t.deleteInvitation=(0,r.createAsyncThunk)("users/deleteInvitation",(e,t)=>a(void 0,void 0,void 0,function*(){try{return n.uspacySdk.invatesService.deleteInvateByUserId(e)}catch(e){return t.rejectWithValue("Failure")}finally{return e}})),t.uploadAvatar=(0,r.createAsyncThunk)("users/uploadAvatar",({file:e,userId:t,adminRole:i,profileId:r},{rejectWithValue:s})=>a(void 0,void 0,void 0,function*(){try{return(yield n.uspacySdk.usersService.uploadAvatar({file:e,userId:i&&t!==r?t:r})).data}catch(e){return s("Failure")}})),t.fetchUsersByFilters=(0,r.createAsyncThunk)("users/fetchUsersByFilters",({fields:e,filters:t,signal:i},{rejectWithValue:r})=>a(void 0,void 0,void 0,function*(){try{const a=(0,d.getFilterParams)(t,e||[]);return(yield n.uspacySdk.usersService.getUsersByFilers(a,i)).data}catch(e){return i.aborted?{aborted:!0}:r(e)}}))},5184:e=>{e.exports=i(9613)},4809:e=>{e.exports=i(2396)},8065:e=>{e.exports=i(771)},5599:e=>{e.exports=i(6449)},113:e=>{e.exports=i(2404)},8524:e=>{e.exports=i(5187)},7078:e=>{e.exports=i(8023)},7026:e=>{e.exports=i(5015)},6689:e=>{e.exports=i(1527)},6022:e=>{e.exports=i(3512)}},a={};function r(e){var i=a[e];if(void 0!==i)return i.exports;var n=a[e]={exports:{}};return t[e].call(n.exports,n,n.exports,r),n.exports}var n={};(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0});const t=r(6689),i=r(641),a=r(9790),s=r(995),d=r(8508);e.default=()=>{const e=(0,i.useAppDispatch)();return(0,t.useEffect)(()=>{e((0,s.fetchProfile)()),e((0,d.fetchUsers)()),e((0,a.fetchDepartments)())},[]),null}})(),e.exports=n})()},4516:(e,t,i)=>{"use strict";i.d(t,{c:()=>s});var a=i(7384),r=i(9422),n=i(1366);function s(e,t,i){return void 0===i&&(i={}),function(s,d,l){try{var u=!l.shouldUseNativeValidation&&"all"===l.criteriaMode;return Promise.resolve((0,n.safeParseAsync)(e,s,Object.assign({},t,{abortPipeEarly:!u}))).then(function(e){if(e.issues){for(var t={};e.issues.length;){var d=e.issues[0],c=(0,n.getDotPath)(d);if(c&&(t[c]||(t[c]={message:d.message,type:d.type}),u)){var o=t[c].types,p=o&&o[d.type];t[c]=(0,r.appendErrors)(c,u,t,d.type,p?[].concat(p,d.message):d.message)}e.issues.shift()}return{values:{},errors:(0,a.toNestErrors)(t,l)}}return{values:i.raw?Object.assign({},s):e.output,errors:{}}})}catch(e){return Promise.reject(e)}}}},5015:(e,t,i)=>{var a=i(2552),r=i(6449),n=i(346);e.exports=function(e){return"string"==typeof e||!r(e)&&n(e)&&"[object String]"==a(e)}},5187:e=>{e.exports=function(e){return null===e}},5338:(e,t,i)=>{"use strict";var a=i(5929);t.H=a.createRoot,a.hydrateRoot},6399:(e,t,i)=>{(()=>{"use strict";var t={641:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useMemoizedAppSelector=t.useAppSelector=t.useAppDispatch=void 0;const r=a(i(113)),n=i(6689),s=i(6022);t.useAppDispatch=()=>(0,s.useDispatch)(),t.useAppSelector=s.useSelector,t.useMemoizedAppSelector=e=>{const i=(0,n.useRef)(null);return(0,t.useAppSelector)(t=>{const a=e(t);return(0,r.default)(i.current,a)?i.current:(i.current=a,a)})}},113:e=>{e.exports=i(2404)},6689:e=>{e.exports=i(1527)},6022:e=>{e.exports=i(3512)}},a={},r=function e(i){var r=a[i];if(void 0!==r)return r.exports;var n=a[i]={exports:{}};return t[i].call(n.exports,n,n.exports,e),n.exports}(641);e.exports=r})()},8023:(e,t,i)=>{var a=i(2552),r=i(346);e.exports=function(e){return"number"==typeof e||r(e)&&"[object Number]"==a(e)}}}]);
//# sourceMappingURL=1952.01c52005.chunk.js.map